15:11:31 SQL> @/dbbackups/ECST/migrations/core_owner/51.3-release-1.15.0-2-CORE_HIST-all.sql/upgrade.sql
15:11:31 SQL> --------------------------------------------------------------------------------
15:11:31 SQL> -- DDL for package PROCS_HISTORY
15:11:31 SQL> --------------------------------------------------------------------------------
15:11:31 SQL> 
15:11:31 SQL> CREATE OR REPLACE PACKAGE "PROCS_HISTORY_V21" AS
15:11:31   2  
15:11:31   3  PROCEDURE CREATE_ADDRESS_HISTORY (
15:11:31   4  /*
15:11:31   5  Throws exceptions:
15:11:31   6  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31   7  */
15:11:31   8  	in_address_id		      IN ADDRESS_HISTORY.ADDRESS_ID%TYPE,
15:11:31   9  	in_system_activity_reason_id  IN ADDRESS_HISTORY.SYSTEM_ACTIVITY_REASON_ID%TYPE,
15:11:31  10  	in_address1		      IN ADDRESS_HISTORY.ADDRESS1%TYPE,
15:11:31  11  	in_address2		      IN ADDRESS_HISTORY.ADDRESS2%TYPE,
15:11:31  12  	in_city 		      IN ADDRESS_HISTORY.CITY%TYPE,
15:11:31  13  	in_state		      IN ADDRESS_HISTORY.STATE%TYPE,
15:11:31  14  	in_postal_code		      IN ADDRESS_HISTORY.POSTAL_CODE%TYPE,
15:11:31  15  	in_country		      IN ADDRESS_HISTORY.COUNTRY%TYPE,
15:11:31  16  	in_created_by		      IN ADDRESS_HISTORY.CREATED_BY%TYPE,
15:11:31  17  	in_create_date		      IN ADDRESS_HISTORY.CREATE_DATE%TYPE,
15:11:31  18  	in_updated_by		      IN ADDRESS_HISTORY.UPDATED_BY%TYPE,
15:11:31  19  	in_update_date		      IN ADDRESS_HISTORY.UPDATE_DATE%TYPE
15:11:31  20  );
15:11:31  21  
15:11:31  22  PROCEDURE CREATE_ACCOUNT_HISTORY (
15:11:31  23  /*
15:11:31  24  Throws exceptions:
15:11:31  25  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31  26  */
15:11:31  27  	in_account_id		      IN NUMBER,
15:11:31  28  	in_suspend_date 	      IN DATE,
15:11:31  29  	in_group_id		      IN NUMBER,
15:11:31  30  	in_created_by		      IN VARCHAR2,
15:11:31  31  	in_create_date		      IN DATE,
15:11:31  32  	in_system_activity_reason_id  IN NUMBER,
15:11:31  33  	in_account_status_id	      IN NUMBER,
15:11:31  34  	in_instrument_type_id	      IN NUMBER,
15:11:31  35  	in_instrument_id	      IN NUMBER
15:11:31  36  );
15:11:31  37  
15:11:31  38  PROCEDURE CREATE_SUBSCRIPTION_HISTORY (
15:11:31  39  /*
15:11:31  40  Throws exceptions:
15:11:31  41  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31  42  */
15:11:31  43  	in_subscription_id	     IN  NUMBER,
15:11:31  44  	in_account_id		     IN NUMBER,
15:11:31  45  	in_purchase_date	     IN DATE,
15:11:31  46  	in_offer_chain_id	     IN NUMBER,
15:11:31  47  	in_suspend_date 	     IN DATE,
15:11:31  48  	in_termination_date	     IN DATE,
15:11:31  49  	in_days_remaining_adjustment IN NUMBER,
15:11:31  50  	in_cancellation_type_id      IN NUMBER,
15:11:31  51  	in_created_by		     IN  VARCHAR2,
15:11:31  52  	in_create_date		     IN DATE,
15:11:31  53  	in_system_activity_reason_id IN  NUMBER
15:11:31  54  );
15:11:31  55  
15:11:31  56  PROCEDURE CREATE_CREDIT_CARD_HISTORY (
15:11:31  57  /*
15:11:31  58  Throws exceptions:
15:11:31  59  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31  60  */
15:11:31  61  	in_credit_card_id	      IN  NUMBER,
15:11:31  62  	in_account_id		      IN NUMBER,
15:11:31  63  	in_instrument_name	      IN VARCHAR2,
15:11:31  64  	in_private_card_holder_name   IN VARCHAR2,
15:11:31  65  	in_private_street_address     IN VARCHAR2,
15:11:31  66  	in_private_street_address2    IN VARCHAR2,
15:11:31  67  	in_state		      IN VARCHAR2,
15:11:31  68  	in_city 		      IN VARCHAR2,
15:11:31  69  	in_postal_code		      IN VARCHAR2,
15:11:31  70  	in_country		      IN CHAR,
15:11:31  71  	in_last_four_cc 	      IN VARCHAR2,
15:11:31  72  	in_expiration_date	      IN DATE,
15:11:31  73  	in_credit_card_type_id	      IN NUMBER,
15:11:31  74  	in_secret_token 	      IN VARCHAR2,
15:11:31  75  	in_chase_profile_id	      IN VARCHAR2,
15:11:31  76  	in_credit_card_status_id      IN NUMBER,
15:11:31  77  	in_created_by		      IN  VARCHAR2,
15:11:31  78  	in_create_date		      IN DATE,
15:11:31  79  	in_system_activity_reason_id  IN  NUMBER
15:11:31  80  );
15:11:31  81  
15:11:31  82  PROCEDURE CREATE_PAYPAL_HISTORY (
15:11:31  83  /*
15:11:31  84  Throws exceptions:
15:11:31  85  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31  86  */
15:11:31  87  	in_paypal_id			IN NUMBER,
15:11:31  88  	in_account_id			IN NUMBER,
15:11:31  89  	in_instrument_name		IN VARCHAR2,
15:11:31  90  	in_private_email_address	IN VARCHAR2,
15:11:31  91  	in_created_by			IN VARCHAR2,
15:11:31  92  	in_create_date			IN DATE,
15:11:31  93  	in_paypal_status_id		IN NUMBER,
15:11:31  94  	in_paypal_prvt_street_address	IN VARCHAR2,
15:11:31  95  	in_paypal_prvt_street_address2	IN VARCHAR2,
15:11:31  96  	in_state			IN VARCHAR2,
15:11:31  97  	in_city 			IN VARCHAR2,
15:11:31  98  	in_postal_code			IN VARCHAR2,
15:11:31  99  	in_country			IN CHAR,
15:11:31 100  	in_expiration_date		IN DATE,
15:11:31 101  	in_system_activity_reason_id	IN NUMBER,
15:11:31 102  	in_secret_token 		IN VARCHAR2
15:11:31 103  );
15:11:31 104  
15:11:31 105  PROCEDURE CREATE_TRANSACTION_HISTORY (
15:11:31 106  /*
15:11:31 107  Throws exceptions:
15:11:31 108  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 109  */
15:11:31 110  	in_transaction_id	     IN TRANSACTION_HISTORY.TRANSACTION_ID%TYPE,
15:11:31 111  	in_transaction_status_id     IN TRANSACTION_HISTORY.TRANSACTION_STATUS_ID%TYPE,
15:11:31 112  	in_transaction_amount	     IN TRANSACTION_HISTORY.TRANSACTION_AMOUNT%TYPE,
15:11:31 113  	in_created_by		     IN TRANSACTION_HISTORY.CREATED_BY%TYPE,
15:11:31 114  	in_create_date		     IN TRANSACTION_HISTORY.CREATE_DATE%TYPE,
15:11:31 115  	in_system_activity_reason_id IN TRANSACTION_HISTORY.SYSTEM_ACTIVITY_REASON_ID%TYPE,
15:11:31 116  	in_order_id		     IN TRANSACTION_HISTORY.ORDER_ID%TYPE DEFAULT NULL,
15:11:31 117  	in_charge_id		     IN TRANSACTION_HISTORY.CHARGE_ID%TYPE DEFAULT NULL,
15:11:31 118  	in_is_refund		     IN TRANSACTION_HISTORY.IS_REFUND%TYPE DEFAULT NULL,
15:11:31 119  	in_is_settled		     IN TRANSACTION_HISTORY.IS_SETTLED%TYPE DEFAULT NULL,
15:11:31 120  	in_transaction_type_code     IN TRANSACTION_HISTORY.TRANSACTION_TYPE_CODE%TYPE DEFAULT NULL
15:11:31 121  );
15:11:31 122  
15:11:31 123  PROCEDURE CREATE_GIFT_CERT_HISTORY (
15:11:31 124  /*
15:11:31 125  Throws exceptions:
15:11:31 126  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 127  */
15:11:31 128  	in_gift_certificate_id	      IN NUMBER,
15:11:31 129  	in_purchaser_group_id	      IN NUMBER,
15:11:31 130  	in_purchase_invoice_id	      IN NUMBER,
15:11:31 131  	in_offer_chain_id	      IN NUMBER,
15:11:31 132  	in_expiration_date	      IN DATE,
15:11:31 133  	in_purchase_date	      IN DATE,
15:11:31 134  	in_gift_certificate_status_id IN NUMBER,
15:11:31 135  	in_code 		      IN VARCHAR2,
15:11:31 136  	in_created_by		      IN VARCHAR2,
15:11:31 137  	in_create_date		      IN DATE,
15:11:31 138  	in_system_activity_reason_id  IN NUMBER,
15:11:31 139  	in_recipient_name	      IN VARCHAR2,
15:11:31 140  	in_gift_message 	      IN VARCHAR2,
15:11:31 141  	in_recipient_email	      IN VARCHAR2,
15:11:31 142  	in_finalized_invoice_id       IN NUMBER,
15:11:31 143  	in_sender_email 	      IN VARCHAR2,
15:11:31 144  	in_sender_name		      IN VARCHAR2,
15:11:31 145  	in_redemption_date	      IN DATE,
15:11:31 146  	in_redeemer_group_id	      IN NUMBER,
15:11:31 147  	in_cancelation_date	      IN DATE,
15:11:31 148  	in_recipient_address_id       IN NUMBER,
15:11:31 149  	in_redeemer_address_id	      IN NUMBER,
15:11:31 150  	in_recipient_notify_date      IN DATE
15:11:31 151  );
15:11:31 152  
15:11:31 153  PROCEDURE CREATE_INVOICE_HISTORY (
15:11:31 154  /*
15:11:31 155  Throws exceptions:
15:11:31 156  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 157  */
15:11:31 158  	in_invoice_id		     IN NUMBER,
15:11:31 159  	in_invoice_status_id	     IN NUMBER,
15:11:31 160  	in_created_by		     IN VARCHAR2,
15:11:31 161  	in_create_date		     IN DATE,
15:11:31 162  	in_system_activity_reason_id IN NUMBER
15:11:31 163  );
15:11:31 164  
15:11:31 165  PROCEDURE CREATE_LICENSE_HISTORY (
15:11:31 166  /*
15:11:31 167  Throws exceptions:
15:11:31 168  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 169  */
15:11:31 170  	in_license_id		     IN NUMBER,
15:11:31 171  	in_license_status_id	     IN NUMBER,
15:11:31 172  	in_needs_entitlements	     IN NUMBER,
15:11:31 173  	in_start_date		     IN DATE,
15:11:31 174  	in_offer_id		     IN NUMBER,
15:11:31 175  	in_subscription_id	     IN NUMBER,
15:11:31 176  	in_invoice_id		     IN NUMBER,
15:11:31 177  	in_end_date		     IN DATE,
15:11:31 178  	in_created_by		     IN VARCHAR2,
15:11:31 179  	in_create_date		     IN DATE,
15:11:31 180  	in_is_extension 	     IN NUMBER,
15:11:31 181  	in_current_offer_index	     IN NUMBER,
15:11:31 182  	in_current_offer_recurr_num  IN NUMBER,
15:11:31 183  	in_system_activity_reason_id IN NUMBER,
15:11:31 184  	in_entitlement_end_date      IN DATE,
15:11:31 185  	in_grace_start_date	     IN DATE,
15:11:31 186  	in_grace_end_date	     IN DATE
15:11:31 187  );
15:11:31 188  
15:11:31 189  PROCEDURE CREATE_CHARGE_HISTORY (
15:11:31 190  /*
15:11:31 191  Throws exceptions:
15:11:31 192  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 193  */
15:11:31 194  	in_charge_id		     IN NUMBER,
15:11:31 195  	in_invoice_id		     IN NUMBER,
15:11:31 196  	in_transaction_id	     IN NUMBER,
15:11:31 197  	in_instrument_type_id	     IN NUMBER,
15:11:31 198  	in_instrument_id	     IN NUMBER,
15:11:31 199  	in_charge_amount	     IN NUMBER,
15:11:31 200  	in_created_by		     IN VARCHAR2,
15:11:31 201  	in_create_date		     IN DATE,
15:11:31 202  	in_charge_status_id	     IN NUMBER,
15:11:31 203  	in_system_activity_reason_id IN NUMBER
15:11:31 204  );
15:11:31 205  
15:11:31 206  PROCEDURE CREATE_ITUNES_RECEIPT_HISTORY (
15:11:31 207  /*
15:11:31 208  Throws exceptions:
15:11:31 209  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 210  */
15:11:31 211  /*
15:11:31 212  CREATE TABLE ITUNES_RECEIPT (
15:11:31 213  	id NUMBER NOT NULL ENABLE,
15:11:31 214  	subscription_id NUMBER NOT NULL ENABLE,
15:11:31 215  	receipt VARCHAR(1024) NOT NULL ENABLE,
15:11:31 216  	status NUMBER,
15:11:31 217  	quantity NUMBER,
15:11:31 218  	product_id VARCHAR(1024),
15:11:31 219  	transaction_id VARCHAR(1024),
15:11:31 220  	purchase_date TIMESTAMP,
15:11:31 221  	original_transaction_id VARCHAR(1024),
15:11:31 222  	original_purchase_date TIMESTAMP,
15:11:31 223  	app_item_id VARCHAR(1024),
15:11:31 224  	version_external_id NUMBER,
15:11:31 225  	bid VARCHAR(1024),
15:11:31 226  	bvrs VARCHAR(255),
15:11:31 227  	expires_date TIMESTAMP,
15:11:31 228  	create_date DATE NOT NULL,
15:11:31 229  	created_by VARCHAR(255) NOT NULL,
15:11:31 230  	update_date DATE NOT NULL,
15:11:31 231  	updated_by VARCHAR(255) NOT NULL,
15:11:31 232  	last_check_date DATE NOT NULL,
15:11:31 233  	CONSTRAINT "ITUNESRECEIPT_PK" PRIMARY KEY ("ID") USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:31 234  	CONSTRAINT "ITUNESRECEIPT_SUBID_FK" FOREIGN KEY ("SUBSCRIPTION_ID") REFERENCES SUBSCRIPTION(ID) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:31 235  	CONSTRAINT "ITUNESRECEIPT_RECEIPT_UK" UNIQUE(receipt) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:31 236  	CONSTRAINT "ITUNESRECEIPT_SUBID_UK" UNIQUE(subscription_id) USING INDEX TABLESPACE "CORE_IDX" ENABLE
15:11:31 237  )
15:11:31 238  TABLESPACE CORE;
15:11:31 239  */
15:11:31 240  	in_id		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ID%TYPE,
15:11:31 241  	in_subscription_id  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.SUBSCRIPTION_ID%TYPE,
15:11:31 242  	in_receipt	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.RECEIPT%TYPE,
15:11:31 243  	in_status	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.STATUS%TYPE,
15:11:31 244  	in_quantity	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.QUANTITY%TYPE,
15:11:31 245  	in_product_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PRODUCT_ID%TYPE,
15:11:31 246  	in_transaction_id   IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.TRANSACTION_ID%TYPE,
15:11:31 247  	in_purchase_date    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PURCHASE_DATE%TYPE,
15:11:31 248  	in_original_transaction_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_TRANSACTION_ID%TYPE,
15:11:31 249  	in_original_purchase_date IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_PURCHASE_DATE%TYPE,
15:11:31 250  	in_app_item_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.APP_ITEM_ID%TYPE,
15:11:31 251  	in_version_external_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.VERSION_EXTERNAL_ID%TYPE,
15:11:31 252  	in_bid		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BID%TYPE,
15:11:31 253  	in_bvrs 	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BVRS%TYPE,
15:11:31 254  	in_expires_date     IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.EXPIRES_DATE%TYPE,
15:11:31 255  	in_create_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATE_DATE%TYPE,
15:11:31 256  	in_created_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATED_BY%TYPE,
15:11:31 257  	in_update_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATE_DATE%TYPE,
15:11:31 258  	in_updated_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATED_BY%TYPE,
15:11:31 259  	in_last_check_date  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.LAST_CHECK_DATE%TYPE,
15:11:31 260  	in_cancel_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CANCEL_DATE%TYPE
15:11:31 261  );
15:11:31 262  
15:11:31 263  PROCEDURE CREATE_INVOICE_ADJ_HISTORY (
15:11:31 264  /*
15:11:31 265  Throws exceptions:
15:11:31 266  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 267  */
15:11:31 268  	in_invoice_adjustment_id     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_ID%TYPE,
15:11:31 269  	in_invoice_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ID%TYPE,
15:11:31 270  	in_is_credit		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.IS_CREDIT%TYPE,
15:11:31 271  	in_charge_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CHARGE_ID%TYPE,
15:11:31 272  	in_adjustment_date	     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.ADJUSTMENT_DATE%TYPE,
15:11:31 273  	in_create_date		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATE_DATE%TYPE,
15:11:31 274  	in_created_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATED_BY%TYPE,
15:11:31 275  	in_invoice_adj_reason_id     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_REASON_ID%TYPE,
15:11:31 276  	in_update_date		      IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATE_DATE%TYPE,
15:11:31 277  	in_updated_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATED_BY%TYPE
15:11:31 278  );
15:11:31 279  
15:11:31 280  PROCEDURE CREATE_NOTIFICATION_HISTORY (
15:11:31 281  	/*
15:11:31 282  	Throws exceptions:
15:11:31 283  	APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 284  	*/
15:11:31 285  	in_notification_id	      IN NUMBER,
15:11:31 286  	in_account_id		      IN NUMBER,
15:11:31 287  	in_group_id		      IN NUMBER,
15:11:31 288  	notification_reason_type_id   IN NUMBER,
15:11:31 289  	notification_status_id	      IN NUMBER,
15:11:31 290  	email_template_params	      IN CLOB,
15:11:31 291  	in_create_date		      IN DATE,
15:11:31 292  	in_date_to_notify	      IN DATE
15:11:31 293  );
15:11:31 294  
15:11:31 295  PROCEDURE CREATE_NOTIF_FAILURE_HISTORY (
15:11:31 296  	/*
15:11:31 297  	Throws exceptions:
15:11:31 298  	APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 299  	*/
15:11:31 300  	in_error_messgae	 IN VARCHAR2,
15:11:31 301  	in_notification_id	 IN NUMBER,
15:11:31 302  	in_create_date		 IN DATE
15:11:31 303  );
15:11:31 304  
15:11:31 305  END PROCS_HISTORY_V21;
15:11:31 306  .
15:11:31 SQL> /

Warning: Package created with compilation errors.

Elapsed: 00:00:00.09
15:11:31 SQL> 
15:11:31 SQL> CREATE OR REPLACE PACKAGE BODY "PROCS_HISTORY_V21" AS
15:11:31   2  
15:11:31   3  PROCEDURE CREATE_ADDRESS_HISTORY (
15:11:31   4  /*
15:11:31   5  Throws exceptions:
15:11:31   6  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31   7  */
15:11:31   8  	in_address_id		      IN ADDRESS_HISTORY.ADDRESS_ID%TYPE,
15:11:31   9  	in_system_activity_reason_id  IN ADDRESS_HISTORY.SYSTEM_ACTIVITY_REASON_ID%TYPE,
15:11:31  10  	in_address1		      IN ADDRESS_HISTORY.ADDRESS1%TYPE,
15:11:31  11  	in_address2		      IN ADDRESS_HISTORY.ADDRESS2%TYPE,
15:11:31  12  	in_city 		      IN ADDRESS_HISTORY.CITY%TYPE,
15:11:31  13  	in_state		      IN ADDRESS_HISTORY.STATE%TYPE,
15:11:31  14  	in_postal_code		      IN ADDRESS_HISTORY.POSTAL_CODE%TYPE,
15:11:31  15  	in_country		      IN ADDRESS_HISTORY.COUNTRY%TYPE,
15:11:31  16  	in_created_by		      IN ADDRESS_HISTORY.CREATED_BY%TYPE,
15:11:31  17  	in_create_date		      IN ADDRESS_HISTORY.CREATE_DATE%TYPE,
15:11:31  18  	in_updated_by		      IN ADDRESS_HISTORY.UPDATED_BY%TYPE,
15:11:31  19  	in_update_date		      IN ADDRESS_HISTORY.UPDATE_DATE%TYPE
15:11:31  20  ) AS
15:11:31  21  SPROC_NAME CONSTANT VARCHAR2(22) := 'CREATE_ADDRESS_HISTORY';
15:11:31  22  BEGIN
15:11:31  23  
15:11:31  24  	INSERT INTO
15:11:31  25  	  ADDRESS_HISTORY (
15:11:31  26  	  ADDRESS_ID,
15:11:31  27  	  SYSTEM_ACTIVITY_REASON_ID,
15:11:31  28  	  ADDRESS1,
15:11:31  29  	  ADDRESS2,
15:11:31  30  	  CITY,
15:11:31  31  	  STATE,
15:11:31  32  	  POSTAL_CODE,
15:11:31  33  	  COUNTRY,
15:11:31  34  	  CREATED_BY,
15:11:31  35  	  CREATE_DATE,
15:11:31  36  	  UPDATED_BY,
15:11:31  37  	  UPDATE_DATE
15:11:31  38  	) VALUES (
15:11:31  39  	  in_address_id,
15:11:31  40  	  in_system_activity_reason_id,
15:11:31  41  	  in_address1,
15:11:31  42  	  in_address2,
15:11:31  43  	  in_city,
15:11:31  44  	  in_state,
15:11:31  45  	  in_postal_code,
15:11:31  46  	  in_country,
15:11:31  47  	  in_created_by,
15:11:31  48  	  in_create_date,
15:11:31  49  	  in_updated_by,
15:11:31  50  	  in_update_date
15:11:31  51  	);
15:11:31  52  
15:11:31  53  EXCEPTION
15:11:31  54  WHEN OTHERS THEN
15:11:31  55  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31  56  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31  57  END CREATE_ADDRESS_HISTORY;
15:11:31  58  
15:11:31  59  /******************************************************************************/
15:11:31  60  
15:11:31  61  PROCEDURE CREATE_ACCOUNT_HISTORY (
15:11:31  62  /*
15:11:31  63  Throws exceptions:
15:11:31  64  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31  65  */
15:11:31  66  	in_account_id		      IN NUMBER,
15:11:31  67  	in_suspend_date 	      IN DATE,
15:11:31  68  	in_group_id		      IN NUMBER,
15:11:31  69  	in_created_by		      IN VARCHAR2,
15:11:31  70  	in_create_date		      IN DATE,
15:11:31  71  	in_system_activity_reason_id  IN NUMBER,
15:11:31  72  	in_account_status_id	      IN NUMBER,
15:11:31  73  	in_instrument_type_id	      IN NUMBER,
15:11:31  74  	in_instrument_id	      IN NUMBER
15:11:31  75  ) AS
15:11:31  76  SPROC_NAME CONSTANT VARCHAR2(22) := 'CREATE_ACCOUNT_HISTORY';
15:11:31  77  BEGIN
15:11:31  78  
15:11:31  79  	INSERT INTO
15:11:31  80  	  ACCOUNT_HISTORY (
15:11:31  81  	  ACCOUNT_ID,
15:11:31  82  	  SUSPEND_DATE,
15:11:31  83  	  GROUP_ID,
15:11:31  84  	  CREATE_DATE,
15:11:31  85  	  CREATED_BY,
15:11:31  86  	  SYSTEM_ACTIVITY_REASON_ID,
15:11:31  87  	  ACCOUNT_STATUS_ID,
15:11:31  88  	  INSTRUMENT_TYPE_ID,
15:11:31  89  	  INSTRUMENT_ID
15:11:31  90  	) VALUES (
15:11:31  91  	  in_account_id,
15:11:31  92  	  in_suspend_date,
15:11:31  93  	  in_group_id,
15:11:31  94  	  in_create_date,
15:11:31  95  	  in_created_by,
15:11:31  96  	  in_system_activity_reason_id,
15:11:31  97  	  in_account_status_id,
15:11:31  98  	  in_instrument_type_id,
15:11:31  99  	  in_instrument_id
15:11:31 100  	);
15:11:31 101  
15:11:31 102  EXCEPTION
15:11:31 103  WHEN OTHERS THEN
15:11:31 104  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 105  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 106  END CREATE_ACCOUNT_HISTORY;
15:11:31 107  
15:11:31 108  /******************************************************************************/
15:11:31 109  
15:11:31 110  PROCEDURE CREATE_SUBSCRIPTION_HISTORY (
15:11:31 111  /*
15:11:31 112  Throws exceptions:
15:11:31 113  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 114  */
15:11:31 115  	in_subscription_id	     IN  NUMBER,
15:11:31 116  	in_account_id		     IN NUMBER,
15:11:31 117  	in_purchase_date	     IN DATE,
15:11:31 118  	in_offer_chain_id	     IN NUMBER,
15:11:31 119  	in_suspend_date 	     IN DATE,
15:11:31 120  	in_termination_date	     IN DATE,
15:11:31 121  	in_days_remaining_adjustment IN NUMBER,
15:11:31 122  	in_cancellation_type_id      IN NUMBER,
15:11:31 123  	in_created_by		     IN  VARCHAR2,
15:11:31 124  	in_create_date		     IN DATE,
15:11:31 125  	in_system_activity_reason_id IN  NUMBER
15:11:31 126  ) AS
15:11:31 127  SPROC_NAME CONSTANT VARCHAR2(27) := 'CREATE_SUBSCRIPTION_HISTORY';
15:11:31 128  BEGIN
15:11:31 129  
15:11:31 130  	INSERT INTO SUBSCRIPTION_HISTORY (
15:11:31 131  	  SUBSCRIPTION_ID,
15:11:31 132  	  ACCOUNT_ID,
15:11:31 133  	  PURCHASE_DATE,
15:11:31 134  	  OFFER_CHAIN_ID,
15:11:31 135  	  SUSPEND_DATE,
15:11:31 136  	  TERMINATION_DATE,
15:11:31 137  	  DAYS_REMAINING_ADJUSTMENT,
15:11:31 138  	  CANCELLATION_TYPE_ID,
15:11:31 139  	  CREATE_DATE,
15:11:31 140  	  CREATED_BY,
15:11:31 141  	  SYSTEM_ACTIVITY_REASON_ID
15:11:31 142  	) VALUES (
15:11:31 143  	  in_subscription_id,
15:11:31 144  	  in_account_id,
15:11:31 145  	  in_purchase_date,
15:11:31 146  	  in_offer_chain_id,
15:11:31 147  	  in_suspend_date,
15:11:31 148  	  in_termination_date,
15:11:31 149  	  in_days_remaining_adjustment,
15:11:31 150  	  in_cancellation_type_id,
15:11:31 151  	  in_create_date,
15:11:31 152  	  in_created_by,
15:11:31 153  	  in_system_activity_reason_id
15:11:31 154  	);
15:11:31 155  
15:11:31 156  EXCEPTION
15:11:31 157  WHEN OTHERS THEN
15:11:31 158  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 159  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 160  END CREATE_SUBSCRIPTION_HISTORY;
15:11:31 161  
15:11:31 162  /******************************************************************************/
15:11:31 163  
15:11:31 164  PROCEDURE CREATE_CREDIT_CARD_HISTORY (
15:11:31 165  /*
15:11:31 166  Throws exceptions:
15:11:31 167  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 168  */
15:11:31 169  	in_credit_card_id	      IN  NUMBER,
15:11:31 170  	in_account_id		      IN NUMBER,
15:11:31 171  	in_instrument_name	      IN VARCHAR2,
15:11:31 172  	in_private_card_holder_name   IN VARCHAR2,
15:11:31 173  	in_private_street_address     IN VARCHAR2,
15:11:31 174  	in_private_street_address2    IN VARCHAR2,
15:11:31 175  	in_state		      IN VARCHAR2,
15:11:31 176  	in_city 		      IN VARCHAR2,
15:11:31 177  	in_postal_code		      IN VARCHAR2,
15:11:31 178  	in_country		      IN CHAR,
15:11:31 179  	in_last_four_cc 	      IN VARCHAR2,
15:11:31 180  	in_expiration_date	      IN DATE,
15:11:31 181  	in_credit_card_type_id	      IN NUMBER,
15:11:31 182  	in_secret_token 	      IN VARCHAR2,
15:11:31 183  	in_chase_profile_id	      IN VARCHAR2,
15:11:31 184  	in_credit_card_status_id      IN NUMBER,
15:11:31 185  	in_created_by		      IN  VARCHAR2,
15:11:31 186  	in_create_date		      IN DATE,
15:11:31 187  	in_system_activity_reason_id  IN  NUMBER
15:11:31 188  ) AS
15:11:31 189  SPROC_NAME CONSTANT VARCHAR2(26) := 'CREATE_CREDIT_CARD_HISTORY';
15:11:31 190  BEGIN
15:11:31 191  
15:11:31 192  	INSERT INTO CREDIT_CARD_HISTORY (
15:11:31 193  	  CREDIT_CARD_ID,
15:11:31 194  	  ACCOUNT_ID,
15:11:31 195  	  INSTRUMENT_NAME,
15:11:31 196  	  PRIVATE_CARD_HOLDER_NAME,
15:11:31 197  	  PRIVATE_STREET_ADDRESS,
15:11:31 198  	  PRIVATE_STREET_ADDRESS2,
15:11:31 199  	  STATE,
15:11:31 200  	  CITY,
15:11:31 201  	  POSTAL_CODE,
15:11:31 202  	  COUNTRY,
15:11:31 203  	  LAST_FOUR_CC,
15:11:31 204  	  EXPIRATION_DATE,
15:11:31 205  	  CREDIT_CARD_TYPE_ID,
15:11:31 206  	  SECRET_TOKEN,
15:11:31 207  	  CHASE_PROFILE_ID,
15:11:31 208  	  CREATE_DATE,
15:11:31 209  	  CREATED_BY,
15:11:31 210  	  SYSTEM_ACTIVITY_REASON_ID,
15:11:31 211  	  CREDIT_CARD_STATUS_ID
15:11:31 212  	) VALUES (
15:11:31 213  	  in_credit_card_id,
15:11:31 214  	  in_account_id,
15:11:31 215  	  in_instrument_name,
15:11:31 216  	  in_private_card_holder_name,
15:11:31 217  	  in_private_street_address,
15:11:31 218  	  in_private_street_address2,
15:11:31 219  	  in_state,
15:11:31 220  	  in_city,
15:11:31 221  	  in_postal_code,
15:11:31 222  	  in_country,
15:11:31 223  	  in_last_four_cc,
15:11:31 224  	  in_expiration_date,
15:11:31 225  	  in_credit_card_type_id,
15:11:31 226  	  in_secret_token,
15:11:31 227  	  in_chase_profile_id,
15:11:31 228  	  in_create_date,
15:11:31 229  	  in_created_by,
15:11:31 230  	  in_system_activity_reason_id,
15:11:31 231  	  in_credit_card_status_id
15:11:31 232  	);
15:11:31 233  
15:11:31 234  EXCEPTION
15:11:31 235  WHEN OTHERS THEN
15:11:31 236  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 237  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 238  END CREATE_CREDIT_CARD_HISTORY;
15:11:31 239  
15:11:31 240  /******************************************************************************/
15:11:31 241  
15:11:31 242  PROCEDURE CREATE_PAYPAL_HISTORY (
15:11:31 243  /*
15:11:31 244  Throws exceptions:
15:11:31 245  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 246  */
15:11:31 247  	in_paypal_id			IN NUMBER,
15:11:31 248  	in_account_id			IN NUMBER,
15:11:31 249  	in_instrument_name		IN VARCHAR2,
15:11:31 250  	in_private_email_address	IN VARCHAR2,
15:11:31 251  	in_created_by			IN VARCHAR2,
15:11:31 252  	in_create_date			IN DATE,
15:11:31 253  	in_paypal_status_id		IN NUMBER,
15:11:31 254  	in_paypal_prvt_street_address	IN VARCHAR2,
15:11:31 255  	in_paypal_prvt_street_address2	IN VARCHAR2,
15:11:31 256  	in_state			IN VARCHAR2,
15:11:31 257  	in_city 			IN VARCHAR2,
15:11:31 258  	in_postal_code			IN VARCHAR2,
15:11:31 259  	in_country			IN CHAR,
15:11:31 260  	in_expiration_date		IN DATE,
15:11:31 261  	in_system_activity_reason_id	IN NUMBER,
15:11:31 262  	in_secret_token 		IN VARCHAR2
15:11:31 263  ) AS
15:11:31 264  SPROC_NAME CONSTANT VARCHAR2(21) := 'CREATE_PAYPAL_HISTORY';
15:11:31 265  BEGIN
15:11:31 266  
15:11:31 267  	INSERT INTO PAYPAL_HISTORY(
15:11:31 268  	    PAYPAL_ID,
15:11:31 269  	    ACCOUNT_ID,
15:11:31 270  	    INSTRUMENT_NAME,
15:11:31 271  	    PRIVATE_EMAIL_ADDRESS,
15:11:31 272  	    CREATE_DATE,
15:11:31 273  	    CREATED_BY,
15:11:31 274  	    PAYPAL_STATUS_ID,
15:11:31 275  	    PRIVATE_STREET_ADDRESS,
15:11:31 276  	    PRIVATE_STREET_ADDRESS2,
15:11:31 277  	    STATE,
15:11:31 278  	    CITY,
15:11:31 279  	    POSTAL_CODE,
15:11:31 280  	    COUNTRY,
15:11:31 281  	    EXPIRATION_DATE,
15:11:31 282  	    SYSTEM_ACTIVITY_REASON_ID,
15:11:31 283  	    SECRET_TOKEN
15:11:31 284  	  ) VALUES (
15:11:31 285  	    in_paypal_id,
15:11:31 286  	    in_account_id,
15:11:31 287  	    in_instrument_name,
15:11:31 288  	    in_private_email_address,
15:11:31 289  	    in_create_date,
15:11:31 290  	    in_created_by,
15:11:31 291  	    in_paypal_status_id,
15:11:31 292  	    in_paypal_prvt_street_address,
15:11:31 293  	    in_paypal_prvt_street_address2,
15:11:31 294  	    in_state,
15:11:31 295  	    in_city,
15:11:31 296  	    in_postal_code,
15:11:31 297  	    in_country,
15:11:31 298  	    in_expiration_date,
15:11:31 299  	    in_system_activity_reason_id,
15:11:31 300  	    in_secret_token
15:11:31 301  	  );
15:11:31 302  
15:11:31 303  EXCEPTION
15:11:31 304  WHEN OTHERS THEN
15:11:31 305  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 306  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 307  END;
15:11:31 308  
15:11:31 309  /******************************************************************************/
15:11:31 310  
15:11:31 311  PROCEDURE CREATE_TRANSACTION_HISTORY (
15:11:31 312  /*
15:11:31 313  Throws exceptions:
15:11:31 314  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 315  */
15:11:31 316  	in_transaction_id	     IN TRANSACTION_HISTORY.TRANSACTION_ID%TYPE,
15:11:31 317  	in_transaction_status_id     IN TRANSACTION_HISTORY.TRANSACTION_STATUS_ID%TYPE,
15:11:31 318  	in_transaction_amount	     IN TRANSACTION_HISTORY.TRANSACTION_AMOUNT%TYPE,
15:11:31 319  	in_created_by		     IN TRANSACTION_HISTORY.CREATED_BY%TYPE,
15:11:31 320  	in_create_date		     IN TRANSACTION_HISTORY.CREATE_DATE%TYPE,
15:11:31 321  	in_system_activity_reason_id IN TRANSACTION_HISTORY.SYSTEM_ACTIVITY_REASON_ID%TYPE,
15:11:31 322  	in_order_id		     IN TRANSACTION_HISTORY.ORDER_ID%TYPE DEFAULT NULL,
15:11:31 323  	in_charge_id		     IN TRANSACTION_HISTORY.CHARGE_ID%TYPE DEFAULT NULL,
15:11:31 324  	in_is_refund		     IN TRANSACTION_HISTORY.IS_REFUND%TYPE DEFAULT NULL,
15:11:31 325  	in_is_settled		     IN TRANSACTION_HISTORY.IS_SETTLED%TYPE DEFAULT NULL,
15:11:31 326  	in_transaction_type_code     IN TRANSACTION_HISTORY.TRANSACTION_TYPE_CODE%TYPE DEFAULT NULL
15:11:31 327  ) AS
15:11:31 328  SPROC_NAME CONSTANT VARCHAR2(26) := 'CREATE_TRANSACTION_HISTORY';
15:11:31 329  BEGIN
15:11:31 330  
15:11:31 331  	INSERT INTO TRANSACTION_HISTORY (
15:11:31 332  	  TRANSACTION_ID,
15:11:31 333  	  TRANSACTION_STATUS_ID,
15:11:31 334  	  TRANSACTION_AMOUNT,
15:11:31 335  	  CREATE_DATE,
15:11:31 336  	  CREATED_BY,
15:11:31 337  	  ORDER_ID,
15:11:31 338  	  CHARGE_ID,
15:11:31 339  	  IS_REFUND,
15:11:31 340  	  IS_SETTLED,
15:11:31 341  	  TRANSACTION_TYPE_CODE,
15:11:31 342  	  SYSTEM_ACTIVITY_REASON_ID
15:11:31 343  	) VALUES (
15:11:31 344  	  in_transaction_id,
15:11:31 345  	  in_transaction_status_id,
15:11:31 346  	  in_transaction_amount,
15:11:31 347  	  in_create_date,
15:11:31 348  	  in_created_by,
15:11:31 349  	  in_order_id,
15:11:31 350  	  in_charge_id,
15:11:31 351  	  in_is_refund,
15:11:31 352  	  in_is_settled,
15:11:31 353  	  in_transaction_type_code,
15:11:31 354  	  in_system_activity_reason_id
15:11:31 355  	);
15:11:31 356  
15:11:31 357  EXCEPTION
15:11:31 358  WHEN OTHERS THEN
15:11:31 359  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 360  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 361  END CREATE_TRANSACTION_HISTORY;
15:11:31 362  
15:11:31 363  /******************************************************************************/
15:11:31 364  
15:11:31 365  PROCEDURE CREATE_GIFT_CERT_HISTORY (
15:11:31 366  	in_gift_certificate_id	      IN NUMBER,
15:11:31 367  	in_purchaser_group_id	      IN NUMBER,
15:11:31 368  	in_purchase_invoice_id	      IN NUMBER,
15:11:31 369  	in_offer_chain_id	      IN NUMBER,
15:11:31 370  	in_expiration_date	      IN DATE,
15:11:31 371  	in_purchase_date	      IN DATE,
15:11:31 372  	in_gift_certificate_status_id IN NUMBER,
15:11:31 373  	in_code 		      IN VARCHAR2,
15:11:31 374  	in_created_by		      IN VARCHAR2,
15:11:31 375  	in_create_date		      IN DATE,
15:11:31 376  	in_system_activity_reason_id  IN NUMBER,
15:11:31 377  	in_recipient_name	      IN VARCHAR2,
15:11:31 378  	in_gift_message 	      IN VARCHAR2,
15:11:31 379  	in_recipient_email	      IN VARCHAR2,
15:11:31 380  	in_finalized_invoice_id       IN NUMBER,
15:11:31 381  	in_sender_email 	      IN VARCHAR2,
15:11:31 382  	in_sender_name		      IN VARCHAR2,
15:11:31 383  	in_redemption_date	      IN DATE,
15:11:31 384  	in_redeemer_group_id	      IN NUMBER,
15:11:31 385  	in_cancelation_date	      IN DATE,
15:11:31 386  	in_recipient_address_id       IN NUMBER,
15:11:31 387  	in_redeemer_address_id	      IN NUMBER,
15:11:31 388  	in_recipient_notify_date      IN DATE
15:11:31 389  ) AS
15:11:31 390  SPROC_NAME CONSTANT VARCHAR2(24) := 'CREATE_GIFT_CERT_HISTORY';
15:11:31 391  BEGIN
15:11:31 392  
15:11:31 393  	INSERT INTO GIFT_CERTIFICATE_HISTORY (
15:11:31 394  	  GIFT_CERTIFICATE_ID,
15:11:31 395  	  PURCHASER_GROUP_ID,
15:11:31 396  	  PURCHASE_INVOICE_ID,
15:11:31 397  	  OFFER_CHAIN_ID,
15:11:31 398  	  EXPIRATION_DATE,
15:11:31 399  	  PURCHASE_DATE,
15:11:31 400  	  GIFT_CERTIFICATE_STATUS_ID,
15:11:31 401  	  CODE,
15:11:31 402  	  CREATE_DATE,
15:11:31 403  	  CREATED_BY,
15:11:31 404  	  SYSTEM_ACTIVITY_REASON_ID,
15:11:31 405  	  RECIPIENT_NAME,
15:11:31 406  	  GIFT_MESSAGE,
15:11:31 407  	  RECIPIENT_EMAIL,
15:11:31 408  	  FINALIZED_INVOICE_ID,
15:11:31 409  	  SENDER_EMAIL,
15:11:31 410  	  SENDER_NAME,
15:11:31 411  	  REDEMPTION_DATE,
15:11:31 412  	  REDEEMER_GROUP_ID,
15:11:31 413  	  CANCELATION_DATE,
15:11:31 414  	  RECIPIENT_ADDRESS_ID,
15:11:31 415  	  REDEEMER_ADDRESS_ID,
15:11:31 416  	  RECIPIENT_NOTIFY_DATE
15:11:31 417  	) VALUES (
15:11:31 418  	  in_gift_certificate_id,
15:11:31 419  	  in_purchaser_group_id,
15:11:31 420  	  in_purchase_invoice_id,
15:11:31 421  	  in_offer_chain_id,
15:11:31 422  	  in_expiration_date,
15:11:31 423  	  in_purchase_date,
15:11:31 424  	  in_gift_certificate_status_id,
15:11:31 425  	  in_code,
15:11:31 426  	  in_create_date,
15:11:31 427  	  in_created_by,
15:11:31 428  	  in_system_activity_reason_id,
15:11:31 429  	  in_recipient_name,
15:11:31 430  	  in_gift_message,
15:11:31 431  	  in_recipient_email,
15:11:31 432  	  in_finalized_invoice_id,
15:11:31 433  	  in_sender_email,
15:11:31 434  	  in_sender_name,
15:11:31 435  	  in_redemption_date,
15:11:31 436  	  in_redeemer_group_id,
15:11:31 437  	  in_cancelation_date,
15:11:31 438  	  in_recipient_address_id,
15:11:31 439  	  in_redeemer_address_id,
15:11:31 440  	  in_recipient_notify_date
15:11:31 441  	);
15:11:31 442  
15:11:31 443  EXCEPTION
15:11:31 444  WHEN OTHERS THEN
15:11:31 445  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 446  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 447  END CREATE_GIFT_CERT_HISTORY;
15:11:31 448  
15:11:31 449  /******************************************************************************/
15:11:31 450  
15:11:31 451  PROCEDURE CREATE_INVOICE_HISTORY (
15:11:31 452  	in_invoice_id		     IN NUMBER,
15:11:31 453  	in_invoice_status_id	     IN NUMBER,
15:11:31 454  	in_created_by		     IN VARCHAR2,
15:11:31 455  	in_create_date		     IN DATE,
15:11:31 456  	in_system_activity_reason_id IN NUMBER
15:11:31 457  ) AS
15:11:31 458  SPROC_NAME CONSTANT VARCHAR2(22) := 'CREATE_INVOICE_HISTORY';
15:11:31 459  BEGIN
15:11:31 460  
15:11:31 461  	INSERT INTO INVOICE_HISTORY (
15:11:31 462  	  INVOICE_ID,
15:11:31 463  	  INVOICE_STATUS_ID,
15:11:31 464  	  CREATE_DATE,
15:11:31 465  	  CREATED_BY,
15:11:31 466  	  SYSTEM_ACTIVITY_REASON_ID
15:11:31 467  	) VALUES (
15:11:31 468  	  in_invoice_id,
15:11:31 469  	  in_invoice_status_id,
15:11:31 470  	  in_create_date,
15:11:31 471  	  in_created_by,
15:11:31 472  	  in_system_activity_reason_id
15:11:31 473  	);
15:11:31 474  
15:11:31 475  EXCEPTION
15:11:31 476  WHEN OTHERS THEN
15:11:31 477  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 478  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 479  END CREATE_INVOICE_HISTORY;
15:11:31 480  
15:11:31 481  /******************************************************************************/
15:11:31 482  
15:11:31 483  PROCEDURE CREATE_LICENSE_HISTORY (
15:11:31 484  /*
15:11:31 485  Throws exceptions:
15:11:31 486  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 487  */
15:11:31 488  	in_license_id		     IN NUMBER,
15:11:31 489  	in_license_status_id	     IN NUMBER,
15:11:31 490  	in_needs_entitlements	     IN NUMBER,
15:11:31 491  	in_start_date		     IN DATE,
15:11:31 492  	in_offer_id		     IN NUMBER,
15:11:31 493  	in_subscription_id	     IN NUMBER,
15:11:31 494  	in_invoice_id		     IN NUMBER,
15:11:31 495  	in_end_date		     IN DATE,
15:11:31 496  	in_created_by		     IN VARCHAR2,
15:11:31 497  	in_create_date		     IN DATE,
15:11:31 498  	in_is_extension 	     IN NUMBER,
15:11:31 499  	in_current_offer_index	     IN NUMBER,
15:11:31 500  	in_current_offer_recurr_num  IN NUMBER,
15:11:31 501  	in_system_activity_reason_id IN NUMBER,
15:11:31 502  	in_entitlement_end_date      IN DATE,
15:11:31 503  	in_grace_start_date	     IN DATE,
15:11:31 504  	in_grace_end_date	     IN DATE
15:11:31 505  ) AS
15:11:31 506  SPROC_NAME CONSTANT VARCHAR2(22) := 'CREATE_LICENSE_HISTORY';
15:11:31 507  BEGIN
15:11:31 508  
15:11:31 509  	INSERT INTO LICENSE_HISTORY (
15:11:31 510  	  LICENSE_ID,
15:11:31 511  	  LICENSE_STATUS_ID,
15:11:31 512  	  START_DATE,
15:11:31 513  	  OFFER_ID,
15:11:31 514  	  SUBSCRIPTION_ID,
15:11:31 515  	  INVOICE_ID,
15:11:31 516  	  END_DATE,
15:11:31 517  	  CREATE_DATE,
15:11:31 518  	  CREATED_BY,
15:11:31 519  	  IS_EXTENSION,
15:11:31 520  	  CURRENT_OFFER_INDEX,
15:11:31 521  	  CURRENT_OFFER_RECURR_NUM,
15:11:31 522  	  SYSTEM_ACTIVITY_REASON_ID,
15:11:31 523  	  NEEDS_ENTITLEMENTS,
15:11:31 524  	  ENTITLEMENT_END_DATE,
15:11:31 525  	  GRACE_START_DATE,
15:11:31 526  	  GRACE_END_DATE
15:11:31 527  	) VALUES (
15:11:31 528  	  in_license_id,
15:11:31 529  	  in_license_status_id,
15:11:31 530  	  in_start_date,
15:11:31 531  	  in_offer_id,
15:11:31 532  	  in_subscription_id,
15:11:31 533  	  in_invoice_id,
15:11:31 534  	  in_end_date,
15:11:31 535  	  in_create_date,
15:11:31 536  	  in_created_by,
15:11:31 537  	  in_is_extension,
15:11:31 538  	  in_current_offer_index,
15:11:31 539  	  in_current_offer_recurr_num,
15:11:31 540  	  in_system_activity_reason_id,
15:11:31 541  	  in_needs_entitlements,
15:11:31 542  	  in_entitlement_end_date,
15:11:31 543  	  in_grace_start_date,
15:11:31 544  	  in_grace_end_date
15:11:31 545  	);
15:11:31 546  
15:11:31 547  EXCEPTION
15:11:31 548  WHEN OTHERS THEN
15:11:31 549  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 550  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 551  END CREATE_LICENSE_HISTORY;
15:11:31 552  
15:11:31 553  /******************************************************************************/
15:11:31 554  
15:11:31 555  PROCEDURE CREATE_CHARGE_HISTORY (
15:11:31 556  /*
15:11:31 557  Throws exceptions:
15:11:31 558  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 559  */
15:11:31 560  	in_charge_id		     IN NUMBER,
15:11:31 561  	in_invoice_id		     IN NUMBER,
15:11:31 562  	in_transaction_id	     IN NUMBER,
15:11:31 563  	in_instrument_type_id	     IN NUMBER,
15:11:31 564  	in_instrument_id	     IN NUMBER,
15:11:31 565  	in_charge_amount	     IN NUMBER,
15:11:31 566  	in_created_by		     IN VARCHAR2,
15:11:31 567  	in_create_date		     IN DATE,
15:11:31 568  	in_charge_status_id	     IN NUMBER,
15:11:31 569  	in_system_activity_reason_id IN NUMBER
15:11:31 570  ) AS
15:11:31 571  SPROC_NAME CONSTANT VARCHAR2(21) := 'CREATE_CHARGE_HISTORY';
15:11:31 572  BEGIN
15:11:31 573  
15:11:31 574  	INSERT INTO CHARGE_HISTORY (
15:11:31 575  	  CHARGE_ID,
15:11:31 576  	  INVOICE_ID,
15:11:31 577  	  TRANSACTION_ID,
15:11:31 578  	  INSTRUMENT_TYPE_ID,
15:11:31 579  	  INSTRUMENT_ID,
15:11:31 580  	  CHARGE_AMOUNT,
15:11:31 581  	  CREATE_DATE,
15:11:31 582  	  CREATED_BY,
15:11:31 583  	  CHARGE_STATUS_ID,
15:11:31 584  	  SYSTEM_ACTIVITY_REASON_ID
15:11:31 585  	) VALUES (
15:11:31 586  	  in_charge_id,
15:11:31 587  	  in_invoice_id,
15:11:31 588  	  in_transaction_id,
15:11:31 589  	  in_instrument_type_id,
15:11:31 590  	  in_instrument_id,
15:11:31 591  	  in_charge_amount,
15:11:31 592  	  in_create_date,
15:11:31 593  	  in_created_by,
15:11:31 594  	  in_charge_status_id,
15:11:31 595  	  in_system_activity_reason_id
15:11:31 596  	);
15:11:31 597  
15:11:31 598  EXCEPTION
15:11:31 599  WHEN OTHERS THEN
15:11:31 600  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 601  	  SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 602  END;
15:11:31 603  
15:11:31 604  
15:11:31 605  PROCEDURE CREATE_ITUNES_RECEIPT_HISTORY (
15:11:31 606  /*
15:11:31 607  Throws exceptions:
15:11:31 608  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 609  */
15:11:31 610  /*
15:11:31 611  CREATE TABLE ITUNES_RECEIPT (
15:11:31 612  	id NUMBER NOT NULL ENABLE,
15:11:31 613  	subscription_id NUMBER NOT NULL ENABLE,
15:11:31 614  	receipt VARCHAR(1024) NOT NULL ENABLE,
15:11:31 615  	status NUMBER,
15:11:31 616  	quantity NUMBER,
15:11:31 617  	product_id VARCHAR(1024),
15:11:31 618  	transaction_id VARCHAR(1024),
15:11:31 619  	purchase_date TIMESTAMP,
15:11:31 620  	original_transaction_id VARCHAR(1024),
15:11:31 621  	app_item_id VARCHAR(1024),
15:11:31 622  	version_external_id NUMBER,
15:11:31 623  	bid VARCHAR(1024),
15:11:31 624  	bvrs VARCHAR(255),
15:11:31 625  	expires_date TIMESTAMP,
15:11:31 626  	create_date DATE NOT NULL,
15:11:31 627  	created_by VARCHAR(255) NOT NULL,
15:11:31 628  	update_date DATE NOT NULL,
15:11:31 629  	updated_by VARCHAR(255) NOT NULL,
15:11:31 630  	last_check_date DATE NOT NULL,
15:11:31 631  	CONSTRAINT "ITUNESRECEIPT_PK" PRIMARY KEY ("ID") USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:31 632  	CONSTRAINT "ITUNESRECEIPT_SUBID_FK" FOREIGN KEY ("SUBSCRIPTION_ID") REFERENCES SUBSCRIPTION(ID) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:31 633  	CONSTRAINT "ITUNESRECEIPT_RECEIPT_UK" UNIQUE(receipt) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:31 634  	CONSTRAINT "ITUNESRECEIPT_SUBID_UK" UNIQUE(subscription_id) USING INDEX TABLESPACE "CORE_IDX" ENABLE
15:11:31 635  )
15:11:31 636  TABLESPACE CORE;
15:11:31 637  */
15:11:31 638  	in_id		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ID%TYPE,
15:11:31 639  	in_subscription_id  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.SUBSCRIPTION_ID%TYPE,
15:11:31 640  	in_receipt	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.RECEIPT%TYPE,
15:11:31 641  	in_status	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.STATUS%TYPE,
15:11:31 642  	in_quantity	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.QUANTITY%TYPE,
15:11:31 643  	in_product_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PRODUCT_ID%TYPE,
15:11:31 644  	in_transaction_id   IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.TRANSACTION_ID%TYPE,
15:11:31 645  	in_purchase_date    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PURCHASE_DATE%TYPE,
15:11:31 646  	in_original_transaction_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_TRANSACTION_ID%TYPE,
15:11:31 647  	in_original_purchase_date IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_PURCHASE_DATE%TYPE,
15:11:31 648  	in_app_item_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.APP_ITEM_ID%TYPE,
15:11:31 649  	in_version_external_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.VERSION_EXTERNAL_ID%TYPE,
15:11:31 650  	in_bid		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BID%TYPE,
15:11:31 651  	in_bvrs 	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BVRS%TYPE,
15:11:31 652  	in_expires_date     IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.EXPIRES_DATE%TYPE,
15:11:31 653  	in_create_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATE_DATE%TYPE,
15:11:31 654  	in_created_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATED_BY%TYPE,
15:11:31 655  	in_update_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATE_DATE%TYPE,
15:11:31 656  	in_updated_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATED_BY%TYPE,
15:11:31 657  	in_last_check_date  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.LAST_CHECK_DATE%TYPE,
15:11:31 658  	in_cancel_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CANCEL_DATE%TYPE
15:11:31 659  ) AS
15:11:31 660  BEGIN
15:11:31 661  	INSERT INTO CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY
15:11:31 662  	(
15:11:31 663  	      id,
15:11:31 664  	      subscription_id,
15:11:31 665  	      receipt,
15:11:31 666  	      status,
15:11:31 667  	      quantity,
15:11:31 668  	      product_id,
15:11:31 669  	      transaction_id,
15:11:31 670  	      purchase_date,
15:11:31 671  	      original_transaction_id,
15:11:31 672  	      original_purchase_date,
15:11:31 673  	      app_item_id,
15:11:31 674  	      version_external_id,
15:11:31 675  	      bid,
15:11:31 676  	      bvrs,
15:11:31 677  	      expires_date,
15:11:31 678  	      create_date,
15:11:31 679  	      created_by,
15:11:31 680  	      update_date,
15:11:31 681  	      updated_by,
15:11:31 682  	      last_check_date,
15:11:31 683  	      cancel_date,
15:11:31 684  	      history_date
15:11:31 685  	)
15:11:31 686  	VALUES
15:11:31 687  	(
15:11:31 688  	      in_id,
15:11:31 689  	      in_subscription_id,
15:11:31 690  	      in_receipt,
15:11:31 691  	      in_status,
15:11:31 692  	      in_quantity,
15:11:31 693  	      in_product_id,
15:11:31 694  	      in_transaction_id,
15:11:31 695  	      in_purchase_date,
15:11:31 696  	      in_original_transaction_id,
15:11:31 697  	      in_original_purchase_date,
15:11:31 698  	      in_app_item_id,
15:11:31 699  	      in_version_external_id,
15:11:31 700  	      in_bid,
15:11:31 701  	      in_bvrs,
15:11:31 702  	      in_expires_date,
15:11:31 703  	      in_create_date,
15:11:31 704  	      in_created_by,
15:11:31 705  	      in_update_date,
15:11:31 706  	      in_updated_by,
15:11:31 707  	      in_last_check_date,
15:11:31 708  	      in_cancel_date,
15:11:31 709  	      sysdate
15:11:31 710  	);
15:11:31 711  END CREATE_ITUNES_RECEIPT_HISTORY;
15:11:31 712  
15:11:31 713  PROCEDURE CREATE_NOTIFICATION_HISTORY (
15:11:31 714  /*
15:11:31 715  Throws exceptions:
15:11:31 716  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 717  */
15:11:31 718  	in_notification_id	      IN NUMBER,
15:11:31 719  	in_account_id		      IN NUMBER,
15:11:31 720  	in_group_id		      IN NUMBER,
15:11:31 721  	notification_reason_type_id   IN NUMBER,
15:11:31 722  	notification_status_id	      IN NUMBER,
15:11:31 723  	email_template_params	      IN CLOB,
15:11:31 724  	in_create_date		      IN DATE,
15:11:31 725  	in_date_to_notify	      IN DATE
15:11:31 726  ) AS
15:11:31 727  	SPROC_NAME CONSTANT VARCHAR2(27) := 'CREATE_NOTIFICATION_HISTORY';
15:11:31 728  BEGIN
15:11:31 729  
15:11:31 730  	 INSERT INTO NOTIFICATION_HISTORY (
15:11:31 731  		ID,
15:11:31 732  		NOTIFICATION_ID,
15:11:31 733  		ACCOUNT_ID,
15:11:31 734  		GROUP_ID,
15:11:31 735  		NOTIFICATION_REASON_TYPE_ID,
15:11:31 736  		NOTIFICATION_STATUS_ID,
15:11:31 737  		EMAIL_TEMPLATE_PARAMS,
15:11:31 738  		CREATE_DATE,
15:11:31 739  		UPDATE_DATE,
15:11:31 740  		DATE_TO_NOTIFY
15:11:31 741  	) VALUES (
15:11:31 742  		not_hist_pk_seq.nextval,
15:11:31 743  		in_notification_id,
15:11:31 744  		in_account_id,
15:11:31 745  		in_group_id,
15:11:31 746  		notification_reason_type_id,
15:11:31 747  		notification_status_id,
15:11:31 748  		email_template_params,
15:11:31 749  		in_create_date,
15:11:31 750  		sysdate,
15:11:31 751  		in_date_to_notify
15:11:31 752  	);
15:11:31 753  
15:11:31 754  EXCEPTION
15:11:31 755  WHEN OTHERS THEN
15:11:31 756  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 757  		SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 758  END CREATE_NOTIFICATION_HISTORY;
15:11:31 759  
15:11:31 760  /******************************************************************************/
15:11:31 761  
15:11:31 762  PROCEDURE CREATE_NOTIF_FAILURE_HISTORY (
15:11:31 763  /*
15:11:31 764  Throws exceptions:
15:11:31 765  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 766  */
15:11:31 767  	in_error_messgae	 IN VARCHAR2,
15:11:31 768  	in_notification_id IN NUMBER,
15:11:31 769  	in_create_date		 IN DATE
15:11:31 770  ) AS
15:11:31 771  	SPROC_NAME CONSTANT VARCHAR2(28) := 'CREATE_NOTIF_FAILURE_HISTORY';
15:11:31 772  BEGIN
15:11:31 773  
15:11:31 774  	INSERT INTO NOTIFICATION_FAILURE_HISTORY (
15:11:31 775  		ERROR_MESSAGE,
15:11:31 776  		NOTIFICATION_ID,
15:11:31 777  		CREATE_DATE,
15:11:31 778  		UPDATE_DATE
15:11:31 779  	) VALUES (
15:11:31 780  		in_error_messgae,
15:11:31 781  		in_notification_id,
15:11:31 782  		in_create_date,
15:11:31 783  		sysdate
15:11:31 784  	);
15:11:31 785  
15:11:31 786  EXCEPTION
15:11:31 787  WHEN OTHERS THEN
15:11:31 788  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 789  		SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 790  END CREATE_NOTIF_FAILURE_HISTORY;
15:11:31 791  
15:11:31 792  PROCEDURE CREATE_INVOICE_ADJ_HISTORY (
15:11:31 793  /*
15:11:31 794  Throws exceptions:
15:11:31 795  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:31 796  */
15:11:31 797  	in_invoice_adjustment_id     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_ID%TYPE,
15:11:31 798  	in_invoice_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ID%TYPE,
15:11:31 799  	in_is_credit		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.IS_CREDIT%TYPE,
15:11:31 800  	in_charge_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CHARGE_ID%TYPE,
15:11:31 801  	in_adjustment_date	     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.ADJUSTMENT_DATE%TYPE,
15:11:31 802  	in_create_date		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATE_DATE%TYPE,
15:11:31 803  	in_created_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATED_BY%TYPE,
15:11:31 804  	in_invoice_adj_reason_id	       IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_REASON_ID%TYPE,
15:11:31 805  	in_update_date		      IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATE_DATE%TYPE,
15:11:31 806  	in_updated_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATED_BY%TYPE
15:11:31 807  )
15:11:31 808  AS
15:11:31 809  SPROC_NAME CONSTANT VARCHAR2(32) := 'CREATE_INVOICE_ADJ_HISTORY';
15:11:31 810  BEGIN
15:11:31 811  	INSERT INTO CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY
15:11:31 812  	(
15:11:31 813  	   INVOICE_ADJUSTMENT_ID,
15:11:31 814  	   INVOICE_ID,
15:11:31 815  	   IS_CREDIT,
15:11:31 816  	   CHARGE_ID,
15:11:31 817  	   ADJUSTMENT_DATE,
15:11:31 818  	   CREATE_DATE,
15:11:31 819  	   CREATED_BY,
15:11:31 820  	   INVOICE_ADJUSTMENT_REASON_ID,
15:11:31 821  	   UPDATE_DATE,
15:11:31 822  	   UPDATED_BY
15:11:31 823  	)
15:11:31 824  	VALUES
15:11:31 825  	(
15:11:31 826  	    in_invoice_adjustment_id,
15:11:31 827  	    in_invoice_id,
15:11:31 828  	    in_is_credit,
15:11:31 829  	    in_charge_id,
15:11:31 830  	    in_adjustment_date,
15:11:31 831  	    in_create_date,
15:11:31 832  	    in_created_by,
15:11:31 833  	    in_invoice_adj_reason_id,
15:11:31 834  	    in_update_date,
15:11:31 835  	    in_updated_by
15:11:31 836  	);
15:11:31 837  
15:11:31 838  EXCEPTION
15:11:31 839  	WHEN OTHERS THEN
15:11:31 840  	  RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:31 841  	    SPROC_NAME||': Unknown error: '||SQLERRM);
15:11:31 842  END CREATE_INVOICE_ADJ_HISTORY;
15:11:31 843  
15:11:31 844  END PROCS_HISTORY_V21;
15:11:31 845  .
15:11:31 SQL> /

Warning: Package Body created with compilation errors.

Elapsed: 00:00:00.14
15:11:32 SQL> 
15:11:32 SQL> --------------------------------------------------------------------------------
15:11:32 SQL> -- DDL for package PUBLIC_PROCS_CORE
15:11:32 SQL> --------------------------------------------------------------------------------
15:11:32 SQL> 
15:11:32 SQL> CREATE OR REPLACE PACKAGE "PUBLIC_PROCS_CORE_V21" AS
15:11:32   2  
15:11:32   3  PROCEDURE CREATE_ADDRESS_HISTORY (
15:11:32   4  /*
15:11:32   5  Throws exceptions:
15:11:32   6  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32   7  */
15:11:32   8  	in_address_id		      IN ADDRESS_HISTORY.ADDRESS_ID%TYPE,
15:11:32   9  	in_system_activity_reason_id  IN ADDRESS_HISTORY.SYSTEM_ACTIVITY_REASON_ID%TYPE,
15:11:32  10  	in_address1		      IN ADDRESS_HISTORY.ADDRESS1%TYPE,
15:11:32  11  	in_address2		      IN ADDRESS_HISTORY.ADDRESS2%TYPE,
15:11:32  12  	in_city 		      IN ADDRESS_HISTORY.CITY%TYPE,
15:11:32  13  	in_state		      IN ADDRESS_HISTORY.STATE%TYPE,
15:11:32  14  	in_postal_code		      IN ADDRESS_HISTORY.POSTAL_CODE%TYPE,
15:11:32  15  	in_country		      IN ADDRESS_HISTORY.COUNTRY%TYPE,
15:11:32  16  	in_created_by		      IN ADDRESS_HISTORY.CREATED_BY%TYPE,
15:11:32  17  	in_create_date		      IN ADDRESS_HISTORY.CREATE_DATE%TYPE,
15:11:32  18  	in_updated_by		      IN ADDRESS_HISTORY.UPDATED_BY%TYPE,
15:11:32  19  	in_update_date		      IN ADDRESS_HISTORY.UPDATE_DATE%TYPE
15:11:32  20  );
15:11:32  21  
15:11:32  22  PROCEDURE CREATE_ACCOUNT_HISTORY (
15:11:32  23  /*
15:11:32  24  Throws exceptions:
15:11:32  25  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32  26  */
15:11:32  27  	in_account_id		      IN NUMBER,
15:11:32  28  	in_suspend_date 	      IN DATE,
15:11:32  29  	in_group_id		      IN NUMBER,
15:11:32  30  	in_created_by		      IN VARCHAR2,
15:11:32  31  	in_create_date		      IN DATE,
15:11:32  32  	in_system_activity_reason_id  IN NUMBER,
15:11:32  33  	in_account_status_id	      IN NUMBER,
15:11:32  34  	in_instrument_type_id	      IN NUMBER,
15:11:32  35  	in_instrument_id	      IN NUMBER
15:11:32  36  );
15:11:32  37  
15:11:32  38  PROCEDURE CREATE_SUBSCRIPTION_HISTORY (
15:11:32  39  /*
15:11:32  40  Throws exceptions:
15:11:32  41  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32  42  */
15:11:32  43  	in_subscription_id	     IN  NUMBER,
15:11:32  44  	in_account_id		     IN NUMBER,
15:11:32  45  	in_purchase_date	     IN DATE,
15:11:32  46  	in_offer_chain_id	     IN NUMBER,
15:11:32  47  	in_suspend_date 	     IN DATE,
15:11:32  48  	in_termination_date	     IN DATE,
15:11:32  49  	in_days_remaining_adjustment IN NUMBER,
15:11:32  50  	in_cancellation_type_id      IN NUMBER,
15:11:32  51  	in_created_by		     IN  VARCHAR2,
15:11:32  52  	in_create_date		     IN DATE,
15:11:32  53  	in_system_activity_reason_id IN  NUMBER
15:11:32  54  );
15:11:32  55  
15:11:32  56  PROCEDURE CREATE_CREDIT_CARD_HISTORY (
15:11:32  57  /*
15:11:32  58  Throws exceptions:
15:11:32  59  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32  60  */
15:11:32  61  	in_credit_card_id	      IN  NUMBER,
15:11:32  62  	in_account_id		      IN NUMBER,
15:11:32  63  	in_instrument_name	      IN VARCHAR2,
15:11:32  64  	in_private_card_holder_name   IN VARCHAR2,
15:11:32  65  	in_private_street_address     IN VARCHAR2,
15:11:32  66  	in_private_street_address2    IN VARCHAR2,
15:11:32  67  	in_state		      IN VARCHAR2,
15:11:32  68  	in_city 		      IN VARCHAR2,
15:11:32  69  	in_postal_code		      IN VARCHAR2,
15:11:32  70  	in_country		      IN CHAR,
15:11:32  71  	in_last_four_cc 	      IN VARCHAR2,
15:11:32  72  	in_expiration_date	      IN DATE,
15:11:32  73  	in_credit_card_type_id	      IN NUMBER,
15:11:32  74  	in_secret_token 	      IN VARCHAR2,
15:11:32  75  	in_chase_profile_id	      IN VARCHAR2,
15:11:32  76  	in_credit_card_status_id      IN NUMBER,
15:11:32  77  	in_created_by		      IN  VARCHAR2,
15:11:32  78  	in_create_date		      IN DATE,
15:11:32  79  	in_system_activity_reason_id  IN  NUMBER
15:11:32  80  );
15:11:32  81  
15:11:32  82  PROCEDURE CREATE_PAYPAL_HISTORY (
15:11:32  83  /*
15:11:32  84  Throws exceptions:
15:11:32  85  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32  86  */
15:11:32  87  	in_paypal_id			IN NUMBER,
15:11:32  88  	in_account_id			IN NUMBER,
15:11:32  89  	in_instrument_name		IN VARCHAR2,
15:11:32  90  	in_private_email_address	IN VARCHAR2,
15:11:32  91  	in_created_by			IN VARCHAR2,
15:11:32  92  	in_create_date			IN DATE,
15:11:32  93  	in_paypal_status_id		IN NUMBER,
15:11:32  94  	in_paypal_prvt_street_address	IN VARCHAR2,
15:11:32  95  	in_paypal_prvt_street_address2	IN VARCHAR2,
15:11:32  96  	in_state			IN VARCHAR2,
15:11:32  97  	in_city 			IN VARCHAR2,
15:11:32  98  	in_postal_code			IN VARCHAR2,
15:11:32  99  	in_country			IN CHAR,
15:11:32 100  	in_expiration_date		IN DATE,
15:11:32 101  	in_system_activity_reason_id	IN NUMBER,
15:11:32 102  	in_secret_token 		IN VARCHAR2
15:11:32 103  );
15:11:32 104  
15:11:32 105  PROCEDURE CREATE_TRANSACTION_HISTORY (
15:11:32 106  /*
15:11:32 107  Throws exceptions:
15:11:32 108  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 109  */
15:11:32 110  	in_transaction_id	     IN TRANSACTION_HISTORY.TRANSACTION_ID%TYPE,
15:11:32 111  	in_transaction_status_id     IN TRANSACTION_HISTORY.TRANSACTION_STATUS_ID%TYPE,
15:11:32 112  	in_transaction_amount	     IN TRANSACTION_HISTORY.TRANSACTION_AMOUNT%TYPE,
15:11:32 113  	in_created_by		     IN TRANSACTION_HISTORY.CREATED_BY%TYPE,
15:11:32 114  	in_create_date		     IN TRANSACTION_HISTORY.CREATE_DATE%TYPE,
15:11:32 115  	in_order_id		     IN TRANSACTION_HISTORY.ORDER_ID%TYPE,
15:11:32 116  	in_charge_id		     IN TRANSACTION_HISTORY.CHARGE_ID%TYPE,
15:11:32 117  	in_is_refund		     IN TRANSACTION_HISTORY.IS_REFUND%TYPE,
15:11:32 118  	in_is_settled		     IN TRANSACTION_HISTORY.IS_SETTLED%TYPE,
15:11:32 119  	in_transaction_type_code     IN TRANSACTION_HISTORY.TRANSACTION_TYPE_CODE%TYPE,
15:11:32 120  	in_system_activity_reason_id IN NUMBER
15:11:32 121  );
15:11:32 122  
15:11:32 123  PROCEDURE CREATE_GIFT_CERT_HISTORY (
15:11:32 124  	in_gift_certificate_id	      IN NUMBER,
15:11:32 125  	in_purchaser_group_id	      IN NUMBER,
15:11:32 126  	in_purchase_invoice_id	      IN NUMBER,
15:11:32 127  	in_offer_chain_id	      IN NUMBER,
15:11:32 128  	in_expiration_date	      IN DATE,
15:11:32 129  	in_purchase_date	      IN DATE,
15:11:32 130  	in_gift_certificate_status_id IN NUMBER,
15:11:32 131  	in_code 		      IN VARCHAR2,
15:11:32 132  	in_created_by		      IN VARCHAR2,
15:11:32 133  	in_create_date		      IN DATE,
15:11:32 134  	in_system_activity_reason_id  IN NUMBER,
15:11:32 135  	in_recipient_name	      IN VARCHAR2,
15:11:32 136  	in_gift_message 	      IN VARCHAR2,
15:11:32 137  	in_recipient_email	      IN VARCHAR2,
15:11:32 138  	in_finalized_invoice_id       IN NUMBER,
15:11:32 139  	in_sender_email 	      IN VARCHAR2,
15:11:32 140  	in_sender_name		      IN VARCHAR2,
15:11:32 141  	in_redemption_date	      IN DATE,
15:11:32 142  	in_redeemer_group_id	      IN NUMBER,
15:11:32 143  	in_cancelation_date	      IN DATE,
15:11:32 144  	in_recipient_address_id       IN NUMBER,
15:11:32 145  	in_redeemer_address_id	      IN NUMBER,
15:11:32 146  	in_recipient_notify_date      IN DATE
15:11:32 147  );
15:11:32 148  
15:11:32 149  PROCEDURE CREATE_INVOICE_HISTORY (
15:11:32 150  /*
15:11:32 151  Throws exceptions:
15:11:32 152  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 153  */
15:11:32 154  	in_invoice_id		     IN NUMBER,
15:11:32 155  	in_invoice_status_id	     IN NUMBER,
15:11:32 156  	in_created_by		     IN VARCHAR2,
15:11:32 157  	in_create_date		     IN DATE,
15:11:32 158  	in_system_activity_reason_id IN NUMBER
15:11:32 159  );
15:11:32 160  
15:11:32 161  PROCEDURE CREATE_LICENSE_HISTORY (
15:11:32 162  /*
15:11:32 163  Throws exceptions:
15:11:32 164  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 165  */
15:11:32 166  	in_license_id		    IN NUMBER,
15:11:32 167  	in_license_status_id	    IN NUMBER,
15:11:32 168  	in_needs_entitlements	    IN NUMBER,
15:11:32 169  	in_start_date		    IN DATE,
15:11:32 170  	in_offer_id		    IN NUMBER,
15:11:32 171  	in_subscription_id	    IN NUMBER,
15:11:32 172  	in_invoice_id		    IN NUMBER,
15:11:32 173  	in_end_date		    IN DATE,
15:11:32 174  	in_created_by		    IN VARCHAR2,
15:11:32 175  	in_create_date		    IN DATE,
15:11:32 176  	in_is_extension 	    IN NUMBER,
15:11:32 177  	in_current_offer_index	    IN NUMBER,
15:11:32 178  	in_current_offer_recurr_num IN NUMBER,
15:11:32 179  	in_system_activity_reason_id IN NUMBER,
15:11:32 180  	in_entitlement_end_date      IN DATE,
15:11:32 181  	in_grace_start_date	    IN DATE,
15:11:32 182  	in_grace_end_date	    IN DATE
15:11:32 183  );
15:11:32 184  
15:11:32 185  PROCEDURE CREATE_CHARGE_HISTORY (
15:11:32 186  /*
15:11:32 187  Throws exceptions:
15:11:32 188  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 189  */
15:11:32 190  	in_charge_id		     IN NUMBER,
15:11:32 191  	in_invoice_id		     IN NUMBER,
15:11:32 192  	in_transaction_id	     IN NUMBER,
15:11:32 193  	in_instrument_type_id	     IN NUMBER,
15:11:32 194  	in_instrument_id	     IN NUMBER,
15:11:32 195  	in_charge_amount	     IN NUMBER,
15:11:32 196  	in_created_by		     IN VARCHAR2,
15:11:32 197  	in_create_date		     IN DATE,
15:11:32 198  	in_charge_status_id	     IN NUMBER,
15:11:32 199  	in_system_activity_reason_id IN NUMBER
15:11:32 200  );
15:11:32 201  
15:11:32 202  PROCEDURE CREATE_ITUNES_RECEIPT_HISTORY (
15:11:32 203  /*
15:11:32 204  Throws exceptions:
15:11:32 205  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 206  */
15:11:32 207  /*
15:11:32 208  CREATE TABLE ITUNES_RECEIPT (
15:11:32 209  	id NUMBER NOT NULL ENABLE,
15:11:32 210  	subscription_id NUMBER NOT NULL ENABLE,
15:11:32 211  	receipt VARCHAR(1024) NOT NULL ENABLE,
15:11:32 212  	status NUMBER,
15:11:32 213  	quantity NUMBER,
15:11:32 214  	product_id VARCHAR(1024),
15:11:32 215  	transaction_id VARCHAR(1024),
15:11:32 216  	purchase_date TIMESTAMP,
15:11:32 217  	original_transaction_id VARCHAR(1024),
15:11:32 218  	original_purchase_date TIMESTAMP,
15:11:32 219  	app_item_id VARCHAR(1024),
15:11:32 220  	version_external_id NUMBER,
15:11:32 221  	bid VARCHAR(1024),
15:11:32 222  	bvrs VARCHAR(255),
15:11:32 223  	expires_date TIMESTAMP,
15:11:32 224  	create_date DATE NOT NULL,
15:11:32 225  	created_by VARCHAR(255) NOT NULL,
15:11:32 226  	update_date DATE NOT NULL,
15:11:32 227  	updated_by VARCHAR(255) NOT NULL,
15:11:32 228  	last_check_date DATE NOT NULL,
15:11:32 229  	CONSTRAINT "ITUNESRECEIPT_PK" PRIMARY KEY ("ID") USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:32 230  	CONSTRAINT "ITUNESRECEIPT_SUBID_FK" FOREIGN KEY ("SUBSCRIPTION_ID") REFERENCES SUBSCRIPTION(ID) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:32 231  	CONSTRAINT "ITUNESRECEIPT_RECEIPT_UK" UNIQUE(receipt) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:32 232  	CONSTRAINT "ITUNESRECEIPT_SUBID_UK" UNIQUE(subscription_id) USING INDEX TABLESPACE "CORE_IDX" ENABLE
15:11:32 233  )
15:11:32 234  TABLESPACE CORE;
15:11:32 235  */
15:11:32 236  	in_id		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ID%TYPE,
15:11:32 237  	in_subscription_id  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.SUBSCRIPTION_ID%TYPE,
15:11:32 238  	in_receipt	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.RECEIPT%TYPE,
15:11:32 239  	in_status	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.STATUS%TYPE,
15:11:32 240  	in_quantity	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.QUANTITY%TYPE,
15:11:32 241  	in_product_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PRODUCT_ID%TYPE,
15:11:32 242  	in_transaction_id   IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.TRANSACTION_ID%TYPE,
15:11:32 243  	in_purchase_date    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PURCHASE_DATE%TYPE,
15:11:32 244  	in_original_transaction_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_TRANSACTION_ID%TYPE,
15:11:32 245  	in_original_purchase_date IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_PURCHASE_DATE%TYPE,
15:11:32 246  	in_app_item_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.APP_ITEM_ID%TYPE,
15:11:32 247  	in_version_external_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.VERSION_EXTERNAL_ID%TYPE,
15:11:32 248  	in_bid		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BID%TYPE,
15:11:32 249  	in_bvrs 	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BVRS%TYPE,
15:11:32 250  	in_expires_date     IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.EXPIRES_DATE%TYPE,
15:11:32 251  	in_create_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATE_DATE%TYPE,
15:11:32 252  	in_created_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATED_BY%TYPE,
15:11:32 253  	in_update_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATE_DATE%TYPE,
15:11:32 254  	in_updated_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATED_BY%TYPE,
15:11:32 255  	in_last_check_date  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.LAST_CHECK_DATE%TYPE,
15:11:32 256  	in_cancel_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CANCEL_DATE%TYPE
15:11:32 257  );
15:11:32 258  
15:11:32 259  PROCEDURE CREATE_INVOICE_ADJ_HISTORY (
15:11:32 260  /*
15:11:32 261  Throws exceptions:
15:11:32 262  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 263  */
15:11:32 264  	in_invoice_adjustment_id     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_ID%TYPE,
15:11:32 265  	in_invoice_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ID%TYPE,
15:11:32 266  	in_is_credit		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.IS_CREDIT%TYPE,
15:11:32 267  	in_charge_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CHARGE_ID%TYPE,
15:11:32 268  	in_adjustment_date	     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.ADJUSTMENT_DATE%TYPE,
15:11:32 269  	in_create_date		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATE_DATE%TYPE,
15:11:32 270  	in_created_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATED_BY%TYPE,
15:11:32 271  	in_invoice_adj_reason_id     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_REASON_ID%TYPE,
15:11:32 272  	in_update_date		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATE_DATE%TYPE,
15:11:32 273  	in_updated_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATED_BY%TYPE
15:11:32 274  );
15:11:32 275  
15:11:32 276  PROCEDURE CREATE_NOTIFICATION_HISTORY (
15:11:32 277  /*
15:11:32 278  Throws exceptions:
15:11:32 279  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 280  */
15:11:32 281  	in_notification_id	      IN NUMBER,
15:11:32 282  	in_account_id		      IN NUMBER,
15:11:32 283  	in_group_id		      IN NUMBER,
15:11:32 284  	notification_reason_type_id   IN NUMBER,
15:11:32 285  	notification_status_id	      IN NUMBER,
15:11:32 286  	email_template_params	      IN CLOB,
15:11:32 287  	in_create_date		      IN DATE,
15:11:32 288  	in_date_to_notify	      IN DATE
15:11:32 289  );
15:11:32 290  
15:11:32 291  PROCEDURE CREATE_NOTIF_FAILURE_HISTORY (
15:11:32 292  /*
15:11:32 293  Throws exceptions:
15:11:32 294  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 295  */
15:11:32 296  	in_error_message	 IN VARCHAR2,
15:11:32 297  	in_notification_id	 IN NUMBER,
15:11:32 298  	in_create_date		 IN DATE
15:11:32 299  );
15:11:32 300  
15:11:32 301  END PUBLIC_PROCS_CORE_V21;
15:11:32 302  .
15:11:32 SQL> /

Warning: Package created with compilation errors.

Elapsed: 00:00:00.05
15:11:32 SQL> 
15:11:32 SQL> CREATE OR REPLACE PACKAGE BODY "PUBLIC_PROCS_CORE_V21" AS
15:11:32   2  
15:11:32   3  PROCEDURE CREATE_ADDRESS_HISTORY (
15:11:32   4  /*
15:11:32   5  Throws exceptions:
15:11:32   6  APP_EXCEPTION_CODES_V21.NOT_FOUND
15:11:32   7  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32   8  */
15:11:32   9  	in_address_id		      IN ADDRESS_HISTORY.ADDRESS_ID%TYPE,
15:11:32  10  	in_system_activity_reason_id  IN ADDRESS_HISTORY.SYSTEM_ACTIVITY_REASON_ID%TYPE,
15:11:32  11  	in_address1		      IN ADDRESS_HISTORY.ADDRESS1%TYPE,
15:11:32  12  	in_address2		      IN ADDRESS_HISTORY.ADDRESS2%TYPE,
15:11:32  13  	in_city 		      IN ADDRESS_HISTORY.CITY%TYPE,
15:11:32  14  	in_state		      IN ADDRESS_HISTORY.STATE%TYPE,
15:11:32  15  	in_postal_code		      IN ADDRESS_HISTORY.POSTAL_CODE%TYPE,
15:11:32  16  	in_country		      IN ADDRESS_HISTORY.COUNTRY%TYPE,
15:11:32  17  	in_created_by		      IN ADDRESS_HISTORY.CREATED_BY%TYPE,
15:11:32  18  	in_create_date		      IN ADDRESS_HISTORY.CREATE_DATE%TYPE,
15:11:32  19  	in_updated_by		      IN ADDRESS_HISTORY.UPDATED_BY%TYPE,
15:11:32  20  	in_update_date		      IN ADDRESS_HISTORY.UPDATE_DATE%TYPE
15:11:32  21  ) AS
15:11:32  22  BEGIN
15:11:32  23  	PROCS_HISTORY_V21.CREATE_ADDRESS_HISTORY(
15:11:32  24  	in_address_id,
15:11:32  25  	in_system_activity_reason_id,
15:11:32  26  	in_address1,
15:11:32  27  	in_address2,
15:11:32  28  	in_city,
15:11:32  29  	in_state,
15:11:32  30  	in_postal_code,
15:11:32  31  	in_country,
15:11:32  32  	in_created_by,
15:11:32  33  	in_create_date,
15:11:32  34  	in_updated_by,
15:11:32  35  	in_update_date
15:11:32  36  	);
15:11:32  37  END CREATE_ADDRESS_HISTORY;
15:11:32  38  
15:11:32  39  PROCEDURE CREATE_ACCOUNT_HISTORY (
15:11:32  40  /*
15:11:32  41  Throws exceptions:
15:11:32  42  APP_EXCEPTION_CODES_V21.NOT_FOUND
15:11:32  43  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32  44  */
15:11:32  45  	in_account_id		      IN NUMBER,
15:11:32  46  	in_suspend_date 	      IN DATE,
15:11:32  47  	in_group_id		      IN NUMBER,
15:11:32  48  	in_created_by		      IN VARCHAR2,
15:11:32  49  	in_create_date		      IN DATE,
15:11:32  50  	in_system_activity_reason_id  IN NUMBER,
15:11:32  51  	in_account_status_id	      IN NUMBER,
15:11:32  52  	in_instrument_type_id	      IN NUMBER,
15:11:32  53  	in_instrument_id	      IN NUMBER
15:11:32  54  ) AS
15:11:32  55  BEGIN
15:11:32  56  	PROCS_HISTORY_V21.CREATE_ACCOUNT_HISTORY(
15:11:32  57  	  in_account_id,
15:11:32  58  	  in_suspend_date,
15:11:32  59  	  in_group_id,
15:11:32  60  	  in_created_by,
15:11:32  61  	  in_create_date,
15:11:32  62  	  in_system_activity_reason_id,
15:11:32  63  	  in_account_status_id,
15:11:32  64  	  in_instrument_type_id,
15:11:32  65  	  in_instrument_id
15:11:32  66  	);
15:11:32  67  END CREATE_ACCOUNT_HISTORY;
15:11:32  68  
15:11:32  69  PROCEDURE CREATE_SUBSCRIPTION_HISTORY (
15:11:32  70  /*
15:11:32  71  Throws exceptions:
15:11:32  72  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32  73  */
15:11:32  74  	in_subscription_id	     IN  NUMBER,
15:11:32  75  	in_account_id		     IN NUMBER,
15:11:32  76  	in_purchase_date	     IN DATE,
15:11:32  77  	in_offer_chain_id	     IN NUMBER,
15:11:32  78  	in_suspend_date 	     IN DATE,
15:11:32  79  	in_termination_date	     IN DATE,
15:11:32  80  	in_days_remaining_adjustment IN NUMBER,
15:11:32  81  	in_cancellation_type_id      IN NUMBER,
15:11:32  82  	in_created_by		     IN  VARCHAR2,
15:11:32  83  	in_create_date		     IN DATE,
15:11:32  84  	in_system_activity_reason_id IN  NUMBER
15:11:32  85  ) AS
15:11:32  86  BEGIN
15:11:32  87  	PROCS_HISTORY_V21.CREATE_SUBSCRIPTION_HISTORY(
15:11:32  88  	  in_subscription_id,
15:11:32  89  	  in_account_id,
15:11:32  90  	  in_purchase_date,
15:11:32  91  	  in_offer_chain_id,
15:11:32  92  	  in_suspend_date,
15:11:32  93  	  in_termination_date,
15:11:32  94  	  in_days_remaining_adjustment,
15:11:32  95  	  in_cancellation_type_id,
15:11:32  96  	  in_created_by,
15:11:32  97  	  in_create_date,
15:11:32  98  	  in_system_activity_reason_id
15:11:32  99  	);
15:11:32 100  END CREATE_SUBSCRIPTION_HISTORY;
15:11:32 101  
15:11:32 102  PROCEDURE CREATE_CREDIT_CARD_HISTORY (
15:11:32 103  /*
15:11:32 104  Throws exceptions:
15:11:32 105  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 106  */
15:11:32 107  	in_credit_card_id	      IN  NUMBER,
15:11:32 108  	in_account_id		      IN NUMBER,
15:11:32 109  	in_instrument_name	      IN VARCHAR2,
15:11:32 110  	in_private_card_holder_name   IN VARCHAR2,
15:11:32 111  	in_private_street_address     IN VARCHAR2,
15:11:32 112  	in_private_street_address2    IN VARCHAR2,
15:11:32 113  	in_state		      IN VARCHAR2,
15:11:32 114  	in_city 		      IN VARCHAR2,
15:11:32 115  	in_postal_code		      IN VARCHAR2,
15:11:32 116  	in_country		      IN CHAR,
15:11:32 117  	in_last_four_cc 	      IN VARCHAR2,
15:11:32 118  	in_expiration_date	      IN DATE,
15:11:32 119  	in_credit_card_type_id	      IN NUMBER,
15:11:32 120  	in_secret_token 	      IN VARCHAR2,
15:11:32 121  	in_chase_profile_id	      IN VARCHAR2,
15:11:32 122  	in_credit_card_status_id      IN NUMBER,
15:11:32 123  	in_created_by		      IN  VARCHAR2,
15:11:32 124  	in_create_date		      IN DATE,
15:11:32 125  	in_system_activity_reason_id  IN  NUMBER
15:11:32 126  ) AS
15:11:32 127  BEGIN
15:11:32 128  	PROCS_HISTORY_V21.CREATE_CREDIT_CARD_HISTORY(
15:11:32 129  	  in_credit_card_id,
15:11:32 130  	  in_account_id,
15:11:32 131  	  in_instrument_name,
15:11:32 132  	  in_private_card_holder_name,
15:11:32 133  	  in_private_street_address,
15:11:32 134  	  in_private_street_address2,
15:11:32 135  	  in_state,
15:11:32 136  	  in_city,
15:11:32 137  	  in_postal_code,
15:11:32 138  	  in_country,
15:11:32 139  	  in_last_four_cc,
15:11:32 140  	  in_expiration_date,
15:11:32 141  	  in_credit_card_type_id,
15:11:32 142  	  in_secret_token,
15:11:32 143  	  in_chase_profile_id,
15:11:32 144  	  in_credit_card_status_id,
15:11:32 145  	  in_created_by,
15:11:32 146  	  in_create_date,
15:11:32 147  	  in_system_activity_reason_id
15:11:32 148  );
15:11:32 149  END CREATE_CREDIT_CARD_HISTORY;
15:11:32 150  
15:11:32 151  /***************************************************************/
15:11:32 152  
15:11:32 153  PROCEDURE CREATE_PAYPAL_HISTORY (
15:11:32 154  /*
15:11:32 155  Throws exceptions:
15:11:32 156  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 157  */
15:11:32 158  	in_paypal_id			IN NUMBER,
15:11:32 159  	in_account_id			IN NUMBER,
15:11:32 160  	in_instrument_name		IN VARCHAR2,
15:11:32 161  	in_private_email_address	IN VARCHAR2,
15:11:32 162  	in_created_by			IN VARCHAR2,
15:11:32 163  	in_create_date			IN DATE,
15:11:32 164  	in_paypal_status_id		IN NUMBER,
15:11:32 165  	in_paypal_prvt_street_address	IN VARCHAR2,
15:11:32 166  	in_paypal_prvt_street_address2	IN VARCHAR2,
15:11:32 167  	in_state			IN VARCHAR2,
15:11:32 168  	in_city 			IN VARCHAR2,
15:11:32 169  	in_postal_code			IN VARCHAR2,
15:11:32 170  	in_country			IN CHAR,
15:11:32 171  	in_expiration_date		IN DATE,
15:11:32 172  	in_system_activity_reason_id	IN NUMBER,
15:11:32 173  	in_secret_token 		IN VARCHAR2
15:11:32 174  ) AS
15:11:32 175  BEGIN
15:11:32 176  	PROCS_HISTORY_V21.CREATE_PAYPAL_HISTORY(
15:11:32 177  	  in_paypal_id,
15:11:32 178  	  in_account_id,
15:11:32 179  	  in_instrument_name,
15:11:32 180  	  in_private_email_address,
15:11:32 181  	  in_created_by,
15:11:32 182  	  in_create_date,
15:11:32 183  	  in_paypal_status_id,
15:11:32 184  	  in_paypal_prvt_street_address,
15:11:32 185  	  in_paypal_prvt_street_address2,
15:11:32 186  	  in_state,
15:11:32 187  	  in_city,
15:11:32 188  	  in_postal_code,
15:11:32 189  	  in_country,
15:11:32 190  	  in_expiration_date,
15:11:32 191  	  in_system_activity_reason_id,
15:11:32 192  	  in_secret_token
15:11:32 193  	);
15:11:32 194  END;
15:11:32 195  
15:11:32 196  /***************************************************************/
15:11:32 197  
15:11:32 198  PROCEDURE CREATE_TRANSACTION_HISTORY (
15:11:32 199  /*
15:11:32 200  Throws exceptions:
15:11:32 201  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 202  */
15:11:32 203  	in_transaction_id	     IN TRANSACTION_HISTORY.TRANSACTION_ID%TYPE,
15:11:32 204  	in_transaction_status_id     IN TRANSACTION_HISTORY.TRANSACTION_STATUS_ID%TYPE,
15:11:32 205  	in_transaction_amount	     IN TRANSACTION_HISTORY.TRANSACTION_AMOUNT%TYPE,
15:11:32 206  	in_created_by		     IN TRANSACTION_HISTORY.CREATED_BY%TYPE,
15:11:32 207  	in_create_date		     IN TRANSACTION_HISTORY.CREATE_DATE%TYPE,
15:11:32 208  	in_order_id		     IN TRANSACTION_HISTORY.ORDER_ID%TYPE,
15:11:32 209  	in_charge_id		     IN TRANSACTION_HISTORY.CHARGE_ID%TYPE,
15:11:32 210  	in_is_refund		     IN TRANSACTION_HISTORY.IS_REFUND%TYPE,
15:11:32 211  	in_is_settled		     IN TRANSACTION_HISTORY.IS_SETTLED%TYPE,
15:11:32 212  	in_transaction_type_code     IN TRANSACTION_HISTORY.TRANSACTION_TYPE_CODE%TYPE,
15:11:32 213  	in_system_activity_reason_id IN NUMBER
15:11:32 214  ) AS
15:11:32 215  BEGIN
15:11:32 216  	PROCS_HISTORY_V21.CREATE_TRANSACTION_HISTORY(
15:11:32 217  	  in_transaction_id,
15:11:32 218  	  in_transaction_status_id,
15:11:32 219  	  in_transaction_amount,
15:11:32 220  	  in_created_by,
15:11:32 221  	  in_create_date,
15:11:32 222  	  in_system_activity_reason_id,
15:11:32 223  	  in_order_id,
15:11:32 224  	  in_charge_id,
15:11:32 225  	  in_is_refund,
15:11:32 226  	  in_is_settled,
15:11:32 227  	  in_transaction_type_code
15:11:32 228  	);
15:11:32 229  END CREATE_TRANSACTION_HISTORY;
15:11:32 230  
15:11:32 231  /***************************************************************/
15:11:32 232  
15:11:32 233  PROCEDURE CREATE_GIFT_CERT_HISTORY (
15:11:32 234  	in_gift_certificate_id	      IN NUMBER,
15:11:32 235  	in_purchaser_group_id	      IN NUMBER,
15:11:32 236  	in_purchase_invoice_id	      IN NUMBER,
15:11:32 237  	in_offer_chain_id	      IN NUMBER,
15:11:32 238  	in_expiration_date	      IN DATE,
15:11:32 239  	in_purchase_date	      IN DATE,
15:11:32 240  	in_gift_certificate_status_id IN NUMBER,
15:11:32 241  	in_code 		      IN VARCHAR2,
15:11:32 242  	in_created_by		      IN VARCHAR2,
15:11:32 243  	in_create_date		      IN DATE,
15:11:32 244  	in_system_activity_reason_id  IN NUMBER,
15:11:32 245  	in_recipient_name	      IN VARCHAR2,
15:11:32 246  	in_gift_message 	      IN VARCHAR2,
15:11:32 247  	in_recipient_email	      IN VARCHAR2,
15:11:32 248  	in_finalized_invoice_id       IN NUMBER,
15:11:32 249  	in_sender_email 	      IN VARCHAR2,
15:11:32 250  	in_sender_name		      IN VARCHAR2,
15:11:32 251  	in_redemption_date	      IN DATE,
15:11:32 252  	in_redeemer_group_id	      IN NUMBER,
15:11:32 253  	in_cancelation_date	      IN DATE,
15:11:32 254  	in_recipient_address_id       IN NUMBER,
15:11:32 255  	in_redeemer_address_id	      IN NUMBER,
15:11:32 256  	in_recipient_notify_date      IN DATE
15:11:32 257  ) AS
15:11:32 258  BEGIN
15:11:32 259  	PROCS_HISTORY_V21.CREATE_GIFT_CERT_HISTORY(
15:11:32 260  	  in_gift_certificate_id,
15:11:32 261  	  in_purchaser_group_id,
15:11:32 262  	  in_purchase_invoice_id,
15:11:32 263  	  in_offer_chain_id,
15:11:32 264  	  in_expiration_date,
15:11:32 265  	  in_purchase_date,
15:11:32 266  	  in_gift_certificate_status_id,
15:11:32 267  	  in_code,
15:11:32 268  	  in_created_by,
15:11:32 269  	  in_create_date,
15:11:32 270  	  in_system_activity_reason_id,
15:11:32 271  	  in_recipient_name,
15:11:32 272  	  in_gift_message,
15:11:32 273  	  in_recipient_email,
15:11:32 274  	  in_finalized_invoice_id,
15:11:32 275  	  in_sender_email,
15:11:32 276  	  in_sender_name,
15:11:32 277  	  in_redemption_date,
15:11:32 278  	  in_redeemer_group_id,
15:11:32 279  	  in_cancelation_date,
15:11:32 280  	  in_recipient_address_id,
15:11:32 281  	  in_redeemer_address_id,
15:11:32 282  	  in_recipient_notify_date
15:11:32 283  	);
15:11:32 284  END CREATE_GIFT_CERT_HISTORY;
15:11:32 285  
15:11:32 286  /***************************************************************/
15:11:32 287  
15:11:32 288  PROCEDURE CREATE_INVOICE_HISTORY (
15:11:32 289  	in_invoice_id		     IN NUMBER,
15:11:32 290  	in_invoice_status_id	     IN NUMBER,
15:11:32 291  	in_created_by		     IN VARCHAR2,
15:11:32 292  	in_create_date		     IN DATE,
15:11:32 293  	in_system_activity_reason_id IN NUMBER
15:11:32 294  ) AS
15:11:32 295  BEGIN
15:11:32 296  	PROCS_HISTORY_V21.CREATE_INVOICE_HISTORY (
15:11:32 297  	  in_invoice_id,
15:11:32 298  	  in_invoice_status_id,
15:11:32 299  	  in_created_by,
15:11:32 300  	  in_create_date,
15:11:32 301  	  in_system_activity_reason_id
15:11:32 302  	);
15:11:32 303  END CREATE_INVOICE_HISTORY;
15:11:32 304  
15:11:32 305  /***************************************************************/
15:11:32 306  
15:11:32 307  PROCEDURE CREATE_LICENSE_HISTORY (
15:11:32 308  /*
15:11:32 309  Throws exceptions:
15:11:32 310  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 311  */
15:11:32 312  	in_license_id		    IN NUMBER,
15:11:32 313  	in_license_status_id	    IN NUMBER,
15:11:32 314  	in_needs_entitlements	    IN NUMBER,
15:11:32 315  	in_start_date		    IN DATE,
15:11:32 316  	in_offer_id		    IN NUMBER,
15:11:32 317  	in_subscription_id	    IN NUMBER,
15:11:32 318  	in_invoice_id		    IN NUMBER,
15:11:32 319  	in_end_date		    IN DATE,
15:11:32 320  	in_created_by		    IN VARCHAR2,
15:11:32 321  	in_create_date		    IN DATE,
15:11:32 322  	in_is_extension 	    IN NUMBER,
15:11:32 323  	in_current_offer_index	    IN NUMBER,
15:11:32 324  	in_current_offer_recurr_num IN NUMBER,
15:11:32 325  	in_system_activity_reason_id IN NUMBER,
15:11:32 326  	in_entitlement_end_date      IN DATE,
15:11:32 327  	in_grace_start_date	    IN DATE,
15:11:32 328  	in_grace_end_date	    IN DATE
15:11:32 329  ) AS
15:11:32 330  BEGIN
15:11:32 331  	PROCS_HISTORY_V21.CREATE_LICENSE_HISTORY (
15:11:32 332  	  in_license_id,
15:11:32 333  	  in_license_status_id,
15:11:32 334  	  in_needs_entitlements,
15:11:32 335  	  in_start_date,
15:11:32 336  	  in_offer_id,
15:11:32 337  	  in_subscription_id,
15:11:32 338  	  in_invoice_id,
15:11:32 339  	  in_end_date,
15:11:32 340  	  in_created_by,
15:11:32 341  	  in_create_date,
15:11:32 342  	  in_is_extension,
15:11:32 343  	  in_current_offer_index,
15:11:32 344  	  in_current_offer_recurr_num,
15:11:32 345  	  in_system_activity_reason_id,
15:11:32 346  	  in_entitlement_end_date,
15:11:32 347  	  in_grace_start_date,
15:11:32 348  	  in_grace_end_date
15:11:32 349  	);
15:11:32 350  END CREATE_LICENSE_HISTORY;
15:11:32 351  
15:11:32 352  /***************************************************************/
15:11:32 353  
15:11:32 354  PROCEDURE CREATE_CHARGE_HISTORY (
15:11:32 355  /*
15:11:32 356  Throws exceptions:
15:11:32 357  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 358  */
15:11:32 359  	in_charge_id		     IN NUMBER,
15:11:32 360  	in_invoice_id		     IN NUMBER,
15:11:32 361  	in_transaction_id	     IN NUMBER,
15:11:32 362  	in_instrument_type_id	     IN NUMBER,
15:11:32 363  	in_instrument_id	     IN NUMBER,
15:11:32 364  	in_charge_amount	     IN NUMBER,
15:11:32 365  	in_created_by		     IN VARCHAR2,
15:11:32 366  	in_create_date		     IN DATE,
15:11:32 367  	in_charge_status_id	     IN NUMBER,
15:11:32 368  	in_system_activity_reason_id IN NUMBER
15:11:32 369  ) AS
15:11:32 370  BEGIN
15:11:32 371  	PROCS_HISTORY_V21.CREATE_CHARGE_HISTORY (
15:11:32 372  	  in_charge_id,
15:11:32 373  	  in_invoice_id,
15:11:32 374  	  in_transaction_id,
15:11:32 375  	  in_instrument_type_id,
15:11:32 376  	  in_instrument_id,
15:11:32 377  	  in_charge_amount,
15:11:32 378  	  in_created_by,
15:11:32 379  	  in_create_date,
15:11:32 380  	  in_charge_status_id,
15:11:32 381  	  in_system_activity_reason_id
15:11:32 382  	);
15:11:32 383  END;
15:11:32 384  
15:11:32 385  PROCEDURE CREATE_ITUNES_RECEIPT_HISTORY (
15:11:32 386  /*
15:11:32 387  Throws exceptions:
15:11:32 388  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 389  */
15:11:32 390  /*
15:11:32 391  CREATE TABLE ITUNES_RECEIPT (
15:11:32 392  	id NUMBER NOT NULL ENABLE,
15:11:32 393  	subscription_id NUMBER NOT NULL ENABLE,
15:11:32 394  	receipt VARCHAR(1024) NOT NULL ENABLE,
15:11:32 395  	status NUMBER,
15:11:32 396  	quantity NUMBER,
15:11:32 397  	product_id VARCHAR(1024),
15:11:32 398  	transaction_id VARCHAR(1024),
15:11:32 399  	purchase_date TIMESTAMP,
15:11:32 400  	original_transaction_id VARCHAR(1024),
15:11:32 401  	original_purchase_date TIMESTAMP,
15:11:32 402  	app_item_id VARCHAR(1024),
15:11:32 403  	version_external_id NUMBER,
15:11:32 404  	bid VARCHAR(1024),
15:11:32 405  	bvrs VARCHAR(255),
15:11:32 406  	expires_date TIMESTAMP,
15:11:32 407  	create_date DATE NOT NULL,
15:11:32 408  	created_by VARCHAR(255) NOT NULL,
15:11:32 409  	update_date DATE NOT NULL,
15:11:32 410  	updated_by VARCHAR(255) NOT NULL,
15:11:32 411  	last_check_date DATE NOT NULL,
15:11:32 412  	CONSTRAINT "ITUNESRECEIPT_PK" PRIMARY KEY ("ID") USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:32 413  	CONSTRAINT "ITUNESRECEIPT_SUBID_FK" FOREIGN KEY ("SUBSCRIPTION_ID") REFERENCES SUBSCRIPTION(ID) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:32 414  	CONSTRAINT "ITUNESRECEIPT_RECEIPT_UK" UNIQUE(receipt) USING INDEX TABLESPACE "CORE_IDX" ENABLE,
15:11:32 415  	CONSTRAINT "ITUNESRECEIPT_SUBID_UK" UNIQUE(subscription_id) USING INDEX TABLESPACE "CORE_IDX" ENABLE
15:11:32 416  )
15:11:32 417  TABLESPACE CORE;
15:11:32 418  */
15:11:32 419  	in_id		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ID%TYPE,
15:11:32 420  	in_subscription_id  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.SUBSCRIPTION_ID%TYPE,
15:11:32 421  	in_receipt	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.RECEIPT%TYPE,
15:11:32 422  	in_status	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.STATUS%TYPE,
15:11:32 423  	in_quantity	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.QUANTITY%TYPE,
15:11:32 424  	in_product_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PRODUCT_ID%TYPE,
15:11:32 425  	in_transaction_id   IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.TRANSACTION_ID%TYPE,
15:11:32 426  	in_purchase_date    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.PURCHASE_DATE%TYPE,
15:11:32 427  	in_original_transaction_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_TRANSACTION_ID%TYPE,
15:11:32 428  	in_original_purchase_date IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.ORIGINAL_PURCHASE_DATE%TYPE,
15:11:32 429  	in_app_item_id	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.APP_ITEM_ID%TYPE,
15:11:32 430  	in_version_external_id IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.VERSION_EXTERNAL_ID%TYPE,
15:11:32 431  	in_bid		    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BID%TYPE,
15:11:32 432  	in_bvrs 	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.BVRS%TYPE,
15:11:32 433  	in_expires_date     IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.EXPIRES_DATE%TYPE,
15:11:32 434  	in_create_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATE_DATE%TYPE,
15:11:32 435  	in_created_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CREATED_BY%TYPE,
15:11:32 436  	in_update_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATE_DATE%TYPE,
15:11:32 437  	in_updated_by	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.UPDATED_BY%TYPE,
15:11:32 438  	in_last_check_date  IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.LAST_CHECK_DATE%TYPE,
15:11:32 439  	in_cancel_date	    IN CORE_HIST_OWNER.ITUNES_RECEIPT_HISTORY.CANCEL_DATE%TYPE
15:11:32 440  ) AS
15:11:32 441  BEGIN
15:11:32 442  	PROCS_HISTORY_V21.CREATE_ITUNES_RECEIPT_HISTORY (
15:11:32 443  	  in_id => in_id,
15:11:32 444  	  in_subscription_id => in_subscription_id,
15:11:32 445  	  in_receipt => in_receipt,
15:11:32 446  	  in_status => in_status,
15:11:32 447  	  in_quantity => in_quantity,
15:11:32 448  	  in_product_id => in_product_id,
15:11:32 449  	  in_transaction_id => in_transaction_id,
15:11:32 450  	  in_purchase_date => in_purchase_date,
15:11:32 451  	  in_original_transaction_id => in_original_transaction_id,
15:11:32 452  	  in_original_purchase_date => in_original_purchase_date,
15:11:32 453  	  in_app_item_id => in_app_item_id,
15:11:32 454  	  in_version_external_id => in_version_external_id,
15:11:32 455  	  in_bid => in_bid,
15:11:32 456  	  in_bvrs => in_bvrs,
15:11:32 457  	  in_expires_date => in_expires_date,
15:11:32 458  	  in_create_date => in_create_date,
15:11:32 459  	  in_created_by => in_created_by,
15:11:32 460  	  in_update_date => in_update_date,
15:11:32 461  	  in_updated_by => in_updated_by,
15:11:32 462  	  in_last_check_date => in_last_check_date,
15:11:32 463  	  in_cancel_date => in_cancel_date
15:11:32 464  	);
15:11:32 465  END;
15:11:32 466  
15:11:32 467  PROCEDURE CREATE_INVOICE_ADJ_HISTORY (
15:11:32 468  /*
15:11:32 469  Throws exceptions:
15:11:32 470  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 471  */
15:11:32 472  	in_invoice_adjustment_id     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_ID%TYPE,
15:11:32 473  	in_invoice_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ID%TYPE,
15:11:32 474  	in_is_credit		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.IS_CREDIT%TYPE,
15:11:32 475  	in_charge_id		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CHARGE_ID%TYPE,
15:11:32 476  	in_adjustment_date	     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.ADJUSTMENT_DATE%TYPE,
15:11:32 477  	in_create_date		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATE_DATE%TYPE,
15:11:32 478  	in_created_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.CREATED_BY%TYPE,
15:11:32 479  	in_invoice_adj_reason_id	       IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.INVOICE_ADJUSTMENT_REASON_ID%TYPE,
15:11:32 480  	in_update_date		      IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATE_DATE%TYPE,
15:11:32 481  	in_updated_by		     IN CORE_HIST_OWNER.INVOICE_ADJUSTMENT_HISTORY.UPDATED_BY%TYPE
15:11:32 482  )  AS
15:11:32 483  	BEGIN
15:11:32 484  	  PROCS_HISTORY_V21.CREATE_INVOICE_ADJ_HISTORY(
15:11:32 485  	    in_invoice_adjustment_id => in_invoice_adjustment_id,
15:11:32 486  	    in_invoice_id => in_invoice_id,
15:11:32 487  	    in_is_credit => in_is_credit,
15:11:32 488  	    in_charge_id => in_charge_id,
15:11:32 489  	    in_adjustment_date => in_adjustment_date,
15:11:32 490  	    in_create_date => in_create_date,
15:11:32 491  	    in_created_by => in_created_by,
15:11:32 492  	    in_invoice_adj_reason_id => in_invoice_adj_reason_id,
15:11:32 493  	    in_update_date => in_update_date,
15:11:32 494  	    in_updated_by => in_updated_by
15:11:32 495  	  );
15:11:32 496  END;
15:11:32 497  
15:11:32 498  PROCEDURE CREATE_NOTIFICATION_HISTORY (
15:11:32 499  /*
15:11:32 500  Throws exceptions:
15:11:32 501  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 502  */
15:11:32 503  	in_notification_id	      IN NUMBER,
15:11:32 504  	in_account_id		      IN NUMBER,
15:11:32 505  	in_group_id		      IN NUMBER,
15:11:32 506  	notification_reason_type_id   IN NUMBER,
15:11:32 507  	notification_status_id	      IN NUMBER,
15:11:32 508  	email_template_params	      IN CLOB,
15:11:32 509  	in_create_date		      IN DATE,
15:11:32 510  	in_date_to_notify	      IN DATE
15:11:32 511  ) AS
15:11:32 512  BEGIN
15:11:32 513  	PROCS_HISTORY_V21.CREATE_NOTIFICATION_HISTORY(
15:11:32 514  	  in_notification_id,
15:11:32 515  	  in_account_id,
15:11:32 516  	  in_group_id,
15:11:32 517  	  notification_reason_type_id,
15:11:32 518  	  notification_status_id,
15:11:32 519  	  email_template_params,
15:11:32 520  	  in_create_date,
15:11:32 521  	  in_date_to_notify
15:11:32 522  );
15:11:32 523  END CREATE_NOTIFICATION_HISTORY;
15:11:32 524  
15:11:32 525  /******************************************************/
15:11:32 526  
15:11:32 527  PROCEDURE CREATE_NOTIF_FAILURE_HISTORY (
15:11:32 528  /*
15:11:32 529  Throws exceptions:
15:11:32 530  APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32 531  */
15:11:32 532  	in_error_message	 IN VARCHAR2,
15:11:32 533  	in_notification_id	 IN NUMBER,
15:11:32 534  	in_create_date		 IN DATE
15:11:32 535  ) AS
15:11:32 536  BEGIN
15:11:32 537  	PROCS_HISTORY_V21.CREATE_NOTIF_FAILURE_HISTORY(
15:11:32 538  	  in_error_message,
15:11:32 539  	  in_notification_id,
15:11:32 540  	  in_create_date
15:11:32 541  );
15:11:32 542  END CREATE_NOTIF_FAILURE_HISTORY;
15:11:32 543  
15:11:32 544  END PUBLIC_PROCS_CORE_V21;
15:11:32 545  .
15:11:32 SQL> /

Warning: Package Body created with compilation errors.

Elapsed: 00:00:00.03
15:11:32 SQL> 
15:11:32 SQL> --------------------------------------------------------------------------------
15:11:32 SQL> -- DDL for package PROCS_PARTITIONS
15:11:32 SQL> --------------------------------------------------------------------------------
15:11:32 SQL> 
15:11:32 SQL> CREATE OR REPLACE PACKAGE "PROCS_PARTITIONS_V21" AS
15:11:32   2  
15:11:32   3  PROCEDURE GET_PARTITION_YEAR_MONTH (
15:11:32   4  	in_year   IN NUMBER,
15:11:32   5  	in_month  IN NUMBER,
15:11:32   6  	out_year  OUT NUMBER,
15:11:32   7  	out_month OUT NUMBER
15:11:32   8  );
15:11:32   9  
15:11:32  10  PROCEDURE ADD_TABLE_PARTITION (
15:11:32  11  	in_tablename	   IN VARCHAR2,
15:11:32  12  	in_partitionprefix IN VARCHAR2,
15:11:32  13  	in_year 	   IN NUMBER,
15:11:32  14  	in_month	   IN NUMBER
15:11:32  15  );
15:11:32  16  
15:11:32  17  PROCEDURE ADD_ACCOUNT_PARTITION(
15:11:32  18  	in_year  IN NUMBER,
15:11:32  19  	in_month IN NUMBER
15:11:32  20  );
15:11:32  21  
15:11:32  22  PROCEDURE ADD_BILLING_LOG_PARTITION(
15:11:32  23  	in_year  IN NUMBER,
15:11:32  24  	in_month IN NUMBER
15:11:32  25  );
15:11:32  26  
15:11:32  27  PROCEDURE ADD_CREDIT_CARD_PARTITION(
15:11:32  28  	in_year  IN NUMBER,
15:11:32  29  	in_month IN NUMBER
15:11:32  30  );
15:11:32  31  
15:11:32  32  PROCEDURE ADD_GCERTIFICATE_PARTITION(
15:11:32  33  	in_year  IN NUMBER,
15:11:32  34  	in_month IN NUMBER
15:11:32  35  );
15:11:32  36  
15:11:32  37  PROCEDURE ADD_OFFER_CHAIN_PARTITION(
15:11:32  38  	in_year  IN NUMBER,
15:11:32  39  	in_month IN NUMBER
15:11:32  40  );
15:11:32  41  
15:11:32  42  PROCEDURE ADD_OFF_OFFER_CHAIN_PARTITION(
15:11:32  43  	in_year  IN NUMBER,
15:11:32  44  	in_month IN NUMBER
15:11:32  45  );
15:11:32  46  
15:11:32  47  PROCEDURE ADD_PAYPAL_PARTITION(
15:11:32  48  	in_year  IN NUMBER,
15:11:32  49  	in_month IN NUMBER
15:11:32  50  );
15:11:32  51  
15:11:32  52  PROCEDURE ADD_SUBSCRIPTION_PARTITION(
15:11:32  53  	in_year  IN NUMBER,
15:11:32  54  	in_month IN NUMBER
15:11:32  55  );
15:11:32  56  
15:11:32  57  PROCEDURE ADD_TRANSACTION_PARTITION(
15:11:32  58  	in_year  IN NUMBER,
15:11:32  59  	in_month IN NUMBER
15:11:32  60  );
15:11:32  61  
15:11:32  62  PROCEDURE ADD_INVOICE_PARTITION(
15:11:32  63  	in_year  IN NUMBER,
15:11:32  64  	in_month IN NUMBER
15:11:32  65  );
15:11:32  66  
15:11:32  67  PROCEDURE ADD_LICENSE_PARTITION(
15:11:32  68  	in_year  IN NUMBER,
15:11:32  69  	in_month IN NUMBER
15:11:32  70  );
15:11:32  71  
15:11:32  72  PROCEDURE ADD_CHARGE_PARTITION(
15:11:32  73  	in_year  IN NUMBER,
15:11:32  74  	in_month IN NUMBER
15:11:32  75  );
15:11:32  76  
15:11:32  77  PROCEDURE ADD_NOTIFICATION_PARTITION(
15:11:32  78  	in_year  IN NUMBER,
15:11:32  79  	in_month IN NUMBER
15:11:32  80  );
15:11:32  81  
15:11:32  82  PROCEDURE ADD_NOTIF_FAILURE_PARTITION(
15:11:32  83  	in_year  IN NUMBER,
15:11:32  84  	in_month IN NUMBER
15:11:32  85  );
15:11:32  86  
15:11:32  87  END PROCS_PARTITIONS_V21;
15:11:32  88  .
15:11:32 SQL> /

Package created.

Elapsed: 00:00:00.05
15:11:32 SQL> 
15:11:32 SQL> CREATE OR REPLACE PACKAGE BODY "PROCS_PARTITIONS_V21" AS
15:11:32   2  
15:11:32   3  PROCEDURE GET_PARTITION_YEAR_MONTH (
15:11:32   4  	in_year   IN NUMBER,
15:11:32   5  	in_month  IN NUMBER,
15:11:32   6  	out_year  OUT NUMBER,
15:11:32   7  	out_month OUT NUMBER
15:11:32   8  ) AS
15:11:32   9  BEGIN
15:11:32  10  	IF in_month < 12 THEN
15:11:32  11  	  out_month := in_month + 1;
15:11:32  12  	  out_year  := in_year;
15:11:32  13  	ELSIF in_month = 12 THEN
15:11:32  14  	  out_month := 1;
15:11:32  15  	  out_year  := in_year + 1;
15:11:32  16  	ELSE
15:11:32  17  	  out_month := in_month;
15:11:32  18  	  out_year  := in_year;
15:11:32  19  	END IF;
15:11:32  20  END;
15:11:32  21  
15:11:32  22  /**************************************************************/
15:11:32  23  
15:11:32  24  PROCEDURE ADD_TABLE_PARTITION (
15:11:32  25  	in_tablename	   IN VARCHAR2,
15:11:32  26  	in_partitionprefix IN VARCHAR2,
15:11:32  27  	in_year 	   IN NUMBER,
15:11:32  28  	in_month	   IN NUMBER
15:11:32  29  ) AS
15:11:32  30  -- VARIABLES
15:11:32  31  partision_year  NUMBER;
15:11:32  32  partision_month NUMBER;
15:11:32  33  -- CONSTANTS
15:11:32  34  const_max_prefix CONSTANT VARCHAR(3) := 'max';
15:11:32  35  BEGIN
15:11:32  36  	GET_PARTITION_YEAR_MONTH(in_year, in_month, partision_year, partision_month);
15:11:32  37  	EXECUTE IMMEDIATE 'ALTER TABLE '||in_tablename||' SPLIT PARTITION '||in_partitionprefix||'_'||const_max_prefix||' AT (date '''||partision_year||'-'||partision_month||'-01'') INTO (PARTITION '||in_partitionprefix||'_y'||in_year||'m'||in_month||', PARTITION '||in_partitionprefix||'_'||const_max_prefix||')';
15:11:32  38  END;
15:11:32  39  
15:11:32  40  /**************************************************************/
15:11:32  41  
15:11:32  42  PROCEDURE ADD_ACCOUNT_PARTITION(
15:11:32  43  	in_year  IN NUMBER,
15:11:32  44  	in_month IN NUMBER
15:11:32  45  ) AS
15:11:32  46  -- CONSTANTS
15:11:32  47  CONST_TABLE_NAME	     CONSTANT VARCHAR2(15) := 'ACCOUNT_HISTORY';
15:11:32  48  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(7)  := 'account';
15:11:32  49  BEGIN
15:11:32  50  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32  51  END ADD_ACCOUNT_PARTITION;
15:11:32  52  
15:11:32  53  /**************************************************************/
15:11:32  54  
15:11:32  55  PROCEDURE ADD_BILLING_LOG_PARTITION(
15:11:32  56  	in_year  IN NUMBER,
15:11:32  57  	in_month IN NUMBER
15:11:32  58  ) AS
15:11:32  59  -- CONSTANTS
15:11:32  60  CONST_TABLE_NAME	     CONSTANT VARCHAR2(28) := 'BILLING_ACTIVITY_LOG_HISTORY';
15:11:32  61  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(15) := 'billing_act_log';
15:11:32  62  BEGIN
15:11:32  63  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32  64  END ADD_BILLING_LOG_PARTITION;
15:11:32  65  
15:11:32  66  /**************************************************************/
15:11:32  67  
15:11:32  68  PROCEDURE ADD_CREDIT_CARD_PARTITION(
15:11:32  69  	in_year  IN NUMBER,
15:11:32  70  	in_month IN NUMBER
15:11:32  71  ) AS
15:11:32  72  -- CONSTANTS
15:11:32  73  CONST_TABLE_NAME	     CONSTANT VARCHAR2(19) := 'CREDIT_CARD_HISTORY';
15:11:32  74  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(11) := 'credit_card';
15:11:32  75  BEGIN
15:11:32  76  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32  77  END ADD_CREDIT_CARD_PARTITION;
15:11:32  78  
15:11:32  79  /**************************************************************/
15:11:32  80  
15:11:32  81  PROCEDURE ADD_GCERTIFICATE_PARTITION(
15:11:32  82  	in_year  IN NUMBER,
15:11:32  83  	in_month IN NUMBER
15:11:32  84  ) AS
15:11:32  85  -- CONSTANTS
15:11:32  86  CONST_TABLE_NAME	     CONSTANT VARCHAR2(24) := 'GIFT_CERTIFICATE_HISTORY';
15:11:32  87  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(16) := 'gift_certificate';
15:11:32  88  BEGIN
15:11:32  89  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32  90  END ADD_GCERTIFICATE_PARTITION;
15:11:32  91  
15:11:32  92  /**************************************************************/
15:11:32  93  
15:11:32  94  PROCEDURE ADD_OFFER_CHAIN_PARTITION(
15:11:32  95  	in_year  IN NUMBER,
15:11:32  96  	in_month IN NUMBER
15:11:32  97  ) AS
15:11:32  98  -- CONSTANTS
15:11:32  99  CONST_TABLE_NAME	     CONSTANT VARCHAR2(19) := 'OFFER_CHAIN_HISTORY';
15:11:32 100  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(11) := 'offer_chain';
15:11:32 101  BEGIN
15:11:32 102  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 103  END ADD_OFFER_CHAIN_PARTITION;
15:11:32 104  
15:11:32 105  /**************************************************************/
15:11:32 106  
15:11:32 107  PROCEDURE ADD_OFF_OFFER_CHAIN_PARTITION(
15:11:32 108  	in_year  IN NUMBER,
15:11:32 109  	in_month IN NUMBER
15:11:32 110  ) AS
15:11:32 111  -- CONSTANTS
15:11:32 112  CONST_TABLE_NAME	     CONSTANT VARCHAR2(25) := 'OFFER_OFFER_CHAIN_HISTORY';
15:11:32 113  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(17) := 'offer_offer_chain';
15:11:32 114  BEGIN
15:11:32 115  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 116  END ADD_OFF_OFFER_CHAIN_PARTITION;
15:11:32 117  
15:11:32 118  /**************************************************************/
15:11:32 119  
15:11:32 120  PROCEDURE ADD_PAYPAL_PARTITION(
15:11:32 121  	in_year  IN NUMBER,
15:11:32 122  	in_month IN NUMBER
15:11:32 123  ) AS
15:11:32 124  -- CONSTANTS
15:11:32 125  CONST_TABLE_NAME	     CONSTANT VARCHAR2(14) := 'PAYPAL_HISTORY';
15:11:32 126  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(6)  := 'paypal';
15:11:32 127  BEGIN
15:11:32 128  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 129  END ADD_PAYPAL_PARTITION;
15:11:32 130  
15:11:32 131  /**************************************************************/
15:11:32 132  
15:11:32 133  PROCEDURE ADD_SUBSCRIPTION_PARTITION(
15:11:32 134  	in_year  IN NUMBER,
15:11:32 135  	in_month IN NUMBER
15:11:32 136  ) AS
15:11:32 137  -- CONSTANTS
15:11:32 138  CONST_TABLE_NAME	     CONSTANT VARCHAR2(20) := 'SUBSCRIPTION_HISTORY';
15:11:32 139  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(12) := 'subscription';
15:11:32 140  BEGIN
15:11:32 141  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 142  END ADD_SUBSCRIPTION_PARTITION;
15:11:32 143  
15:11:32 144  /**************************************************************/
15:11:32 145  
15:11:32 146  PROCEDURE ADD_TRANSACTION_PARTITION(
15:11:32 147  	in_year  IN NUMBER,
15:11:32 148  	in_month IN NUMBER
15:11:32 149  ) AS
15:11:32 150  -- CONSTANTS
15:11:32 151  CONST_TABLE_NAME	     CONSTANT VARCHAR2(19) := 'TRANSACTION_HISTORY';
15:11:32 152  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(11) := 'transaction';
15:11:32 153  BEGIN
15:11:32 154  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 155  END ADD_TRANSACTION_PARTITION;
15:11:32 156  
15:11:32 157  /**************************************************************/
15:11:32 158  
15:11:32 159  PROCEDURE ADD_INVOICE_PARTITION(
15:11:32 160  	in_year  IN NUMBER,
15:11:32 161  	in_month IN NUMBER
15:11:32 162  ) AS
15:11:32 163  -- CONSTANTS
15:11:32 164  CONST_TABLE_NAME	     CONSTANT VARCHAR2(15) := 'INVOICE_HISTORY';
15:11:32 165  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(7) := 'invoice';
15:11:32 166  BEGIN
15:11:32 167  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 168  END ADD_INVOICE_PARTITION;
15:11:32 169  
15:11:32 170  /**************************************************************/
15:11:32 171  
15:11:32 172  PROCEDURE ADD_LICENSE_PARTITION(
15:11:32 173  	in_year  IN NUMBER,
15:11:32 174  	in_month IN NUMBER
15:11:32 175  ) AS
15:11:32 176  -- CONSTANTS
15:11:32 177  CONST_TABLE_NAME	     CONSTANT VARCHAR2(15) := 'LICENSE_HISTORY';
15:11:32 178  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(7) := 'license';
15:11:32 179  BEGIN
15:11:32 180  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 181  END ADD_LICENSE_PARTITION;
15:11:32 182  
15:11:32 183  /**************************************************************/
15:11:32 184  
15:11:32 185  PROCEDURE ADD_CHARGE_PARTITION(
15:11:32 186  	in_year  IN NUMBER,
15:11:32 187  	in_month IN NUMBER
15:11:32 188  ) AS
15:11:32 189  -- CONSTANTS
15:11:32 190  CONST_TABLE_NAME	     CONSTANT VARCHAR2(15) := 'CHARGE_HISTORY';
15:11:32 191  CONST_PARTITION_PREFIX CONSTANT VARCHAR2(7) := 'charge';
15:11:32 192  BEGIN
15:11:32 193  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 194  END ADD_CHARGE_PARTITION;
15:11:32 195  
15:11:32 196  /**************************************************************/
15:11:32 197  
15:11:32 198  PROCEDURE ADD_NOTIFICATION_PARTITION(
15:11:32 199  	in_year  IN NUMBER,
15:11:32 200  	in_month IN NUMBER
15:11:32 201  ) AS
15:11:32 202  -- CONSTANTS
15:11:32 203  	CONST_TABLE_NAME       CONSTANT VARCHAR2(20) := 'NOTIFICATION_HISTORY';
15:11:32 204  	CONST_PARTITION_PREFIX CONSTANT VARCHAR2(12)  := 'notification';
15:11:32 205  BEGIN
15:11:32 206  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 207  END ADD_NOTIFICATION_PARTITION;
15:11:32 208  
15:11:32 209  /**************************************************************/
15:11:32 210  
15:11:32 211  PROCEDURE ADD_NOTIF_FAILURE_PARTITION(
15:11:32 212  	in_year  IN NUMBER,
15:11:32 213  	in_month IN NUMBER
15:11:32 214  ) AS
15:11:32 215  -- CONSTANTS
15:11:32 216  	CONST_TABLE_NAME       CONSTANT VARCHAR2(28) := 'NOTIFICATION_FAILURE_HISTORY';
15:11:32 217  	CONST_PARTITION_PREFIX CONSTANT VARCHAR2(20) := 'notification_failure';
15:11:32 218  BEGIN
15:11:32 219  	ADD_TABLE_PARTITION(CONST_TABLE_NAME, CONST_PARTITION_PREFIX, in_year, in_month);
15:11:32 220  END ADD_NOTIF_FAILURE_PARTITION;
15:11:32 221  
15:11:32 222  END PROCS_PARTITIONS_V21;
15:11:32 223  .
15:11:32 SQL> /

Package body created.

Elapsed: 00:00:00.04
15:11:32 SQL> 
15:11:32 SQL> --------------------------------------------------------------------------------
15:11:32 SQL> -- DDL for package PROCS_SYSTEM
15:11:32 SQL> --------------------------------------------------------------------------------
15:11:32 SQL> 
15:11:32 SQL> CREATE OR REPLACE PACKAGE "PROCS_SYSTEM_V21" AS
15:11:32   2  
15:11:32   3  PROCEDURE INCREMENT_VERSION;
15:11:32   4  
15:11:32   5  PROCEDURE CHECK_VERSION(
15:11:32   6  	  in_vers    IN NUMBER,
15:11:32   7  	  out_result OUT NUMBER
15:11:32   8  );
15:11:32   9  
15:11:32  10  END PROCS_SYSTEM_V21;
15:11:32  11  .
15:11:32 SQL> /

Package created.

Elapsed: 00:00:00.02
15:11:32 SQL> 
15:11:32 SQL> CREATE OR REPLACE PACKAGE BODY "PROCS_SYSTEM_V21" AS
15:11:32   2  
15:11:32   3  PROCEDURE INCREMENT_VERSION
15:11:32   4  /*
15:11:32   5  Throws exceptions:
15:11:32   6  CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR
15:11:32   7  */
15:11:32   8  AS
15:11:32   9  BEGIN
15:11:32  10  
15:11:32  11  	UPDATE SYS_VERSION SET version=version+1;
15:11:32  12  
15:11:32  13  EXCEPTION
15:11:32  14  WHEN OTHERS THEN
15:11:32  15  	RAISE_APPLICATION_ERROR(CORE_OWNER.APP_EXCEPTION_CODES_V21.UNKNOWN_ERROR,
15:11:32  16  	  'Unknown error');
15:11:32  17  END INCREMENT_VERSION;
15:11:32  18  
15:11:32  19  /*************************************************************/
15:11:32  20  
15:11:32  21  PROCEDURE CHECK_VERSION(
15:11:32  22  	  in_vers    IN NUMBER,
15:11:32  23  	  out_result OUT NUMBER
15:11:32  24  ) AS
15:11:32  25  	current_version NUMBER;
15:11:32  26  BEGIN
15:11:32  27  	SELECT version INTO current_version FROM SYS_VERSION;
15:11:32  28  	IF(current_version != in_vers) THEN
15:11:32  29  	  out_result := 1;
15:11:32  30  	ELSE
15:11:32  31  	  out_result := 0;
15:11:32  32  	END IF;
15:11:32  33  	EXCEPTION
15:11:32  34  	      WHEN OTHERS THEN
15:11:32  35  	      NULL;
15:11:32  36  END CHECK_VERSION;
15:11:32  37  
15:11:32  38  END PROCS_SYSTEM_V21;
15:11:32  39  .
15:11:32 SQL> /

Package body created.

Elapsed: 00:00:00.02
15:11:32 SQL> 
15:11:32 SQL> grant execute on PUBLIC_PROCS_CORE_V21 to core_owner;

Grant succeeded.

Elapsed: 00:00:00.04
15:11:32 SQL> grant execute on PUBLIC_PROCS_CORE_V21 to core_app;

Grant succeeded.

Elapsed: 00:00:00.01
15:11:32 SQL> grant execute on PUBLIC_PROCS_CORE_V21 to ops_notif_app;

Grant succeeded.

Elapsed: 00:00:00.00
15:11:32 SQL> 
15:11:32 SQL> commit;

Commit complete.

Elapsed: 00:00:00.00
15:11:32 SQL> spool off;


Subject: Nomad upgrade completed successfully: ECST@rac01.stg.ewr1.nytimes.com
From: Nomad for Oracle <nytd_oracledba@nytimes.com>
To: nytd_ecommerce@nytimes.com
Cc: nytd_oracledba@nytimes.com

Nomad upgrade operation completed successfully without errors. 
        
        Details
        -------
        DB Hostname: rac01.stg.ewr1.nytimes.com
        DB Role: PRIMARY
        SID: ECST
        Schema: core_owner
        Migration: 51.3-release-1.15.0-2-CORE_HIST-all.sql
        SVN Revision: 12649
        Duration: 1 sec.
        DBA: sbao
        Service Request: https://jira.em.nytimes.com/browse/ORA-805