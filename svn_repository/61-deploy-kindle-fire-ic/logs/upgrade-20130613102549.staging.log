10:26:03 SQL> @/dbbackups/ECST/migrations/core_owner/61-deploy-kindle-fire-ic/upgrade.sql
10:26:03 SQL> WHENEVER SQLERROR EXIT SQL.SQLCODE ROLLBACK
10:26:03 SQL> SET SCAN OFF
10:26:03 SQL> SET DEFINE OFF
10:26:03 SQL> 
10:26:03 SQL> 
10:26:03 SQL> DECLARE
10:26:03   2  	TMP_VAR NUMBER;
10:26:03   3  	CUR_PRD_ID NUMBER;
10:26:03   4  	CUR_CAPABILITY_ID NUMBER;
10:26:03   5  BEGIN
10:26:03   6  	BEGIN
10:26:03   7  	  SELECT 1 INTO TMP_VAR FROM OFFER_CHAIN WHERE ID = 2691330170 AND ROWNUM <= 1;
10:26:03   8  	  UPDATE OFFER_CHAIN SET NAME='NYTimes: Web + Tablet App', DESCRIPTION='Unlimited access to NYTimes.com and the NYTimes tablet app.*', PRODUCT_URI='', VENDOR_SOURCE_ID='1', BILLING_SOURCE_ID=(SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Amazon'), IS_SEAT_LICENSE=0, GROUP_ACCOUNT_TYPE_ID='NO',IS_ADDRESS_REQUIRED=0, OFFER_CHAIN_STATUS_ID = 1, UPDATE_DATE = SYSDATE, UPDATED_BY = 'OFFERMAKER', IS_GIFT_CERTIFICATE='0', REVOKE_ENTITLEMENTS = '0', ADOPTABILITY_WINDOW_START_DATE = to_date('04-Apr-2013 00:00:00','DD-MON-YY HH24:MI:SS'), ADOPTABILITY_WINDOW_END_DATE = to_date('01-Jan-2100 00:00:00','DD-MON-YY HH24:MI:SS'), AMAZON_APPSTORE_SKU='com.nytimes.kindlefire.bundleB.1.month.optin.7.days.test' WHERE ID = 2691330170;
10:26:03   9  	EXCEPTION
10:26:03  10  	  WHEN NO_DATA_FOUND THEN
10:26:03  11  	    INSERT INTO OFFER_CHAIN (ID, NAME, DESCRIPTION, ADOPTABILITY_WINDOW_START_DATE, ADOPTABILITY_WINDOW_END_DATE, IS_GIFT_CERTIFICATE, PRODUCT_URI, OFFER_CHAIN_STATUS_ID, REVOKE_ENTITLEMENTS, VENDOR_SOURCE_ID, BILLING_SOURCE_ID, IS_SEAT_LICENSE, GROUP_ACCOUNT_TYPE_ID, IS_ADDRESS_REQUIRED, AMAZON_APPSTORE_SKU, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (2691330170, 'NYTimes: Web + Tablet App', 'Unlimited access to NYTimes.com and the NYTimes tablet app.*', to_date('04-Apr-2013 00:00:00','DD-MON-YY HH24:MI:SS'), to_date('01-Jan-2100 00:00:00','DD-MON-YY HH24:MI:SS'), '0', NULL, '1', '0', '1', (SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Amazon'), decode('NO','IL',1,0), 'NO', '0', 'com.nytimes.kindlefire.bundleB.1.month.optin.7.days.test', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
10:26:03  12  	END;
10:26:03  13  	DELETE FROM OFFER_CHAIN_ELIGIBILITY WHERE offer_chain_id = 2691330170;
10:26:03  14  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 2691330170, 'IS_COMP', '0', 'OFFERMAKER', SYSDATE);
10:26:03  15  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 2691330170, 'MAX_CONCURRENT_SUBS', 'UNLIMITED', 'OFFERMAKER', SYSDATE);
10:26:03  16  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 2691330170, 'INTERNAL_ONLY', '0', 'OFFERMAKER', SYSDATE);
10:26:03  17  	DELETE FROM OFFER_CHAIN_META_DATA WHERE offer_chain_id = 2691330170;
10:26:03  18  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'BUNDLE_EXPLANATION', 'W+T (for Amazon Kindle Fire)', 'OFFERMAKER', SYSDATE);
10:26:03  19  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'PRICE_DESCRIPTION', '14 days free trial Thereafter $19.99 every 30 days for Bundle B (Billed by Amazon) ', 'OFFERMAKER', SYSDATE);
10:26:03  20  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'PRICE_SHORT_DESCRIPTION', 'Amazon Fire Bundle B', 'OFFERMAKER', SYSDATE);
10:26:03  21  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'OFFER_TYPE', 'Full Price', 'OFFERMAKER', SYSDATE);
10:26:03  22  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'PROMO_PRICE_FOOTER_LABEL', 'Billing Cycle', 'OFFERMAKER', SYSDATE);
10:26:03  23  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'BILLING_CYCLE', 'monthly', 'OFFERMAKER', SYSDATE);
10:26:03  24  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'SUBSCRIBER_TYPE', 'Kindle Fire', 'OFFERMAKER', SYSDATE);
10:26:03  25  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'REFUND_POLICY', 'Monthly Billing: No refund.  Users will maintain access for the remainder of the billing period.  Users will not be billed in the next billing cycle.', 'OFFERMAKER', SYSDATE);
10:26:03  26  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'BUNDLE', 'Bundle B (Web+Tab)', 'OFFERMAKER', SYSDATE);
10:26:03  27  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'ADX_BUNDLE', 'MM_FULL', 'OFFERMAKER', SYSDATE);
10:26:03  28  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'SIEBEL_CAMPAIGN_CODE', '3JLKW', 'OFFERMAKER', SYSDATE);
10:26:03  29  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2691330170, 'UID', '8f977472607f1c5264819e007e4d7fc434cccdb257e9f9138fe17e2690498de3', 'OFFERMAKER', SYSDATE);
10:26:03  30  	DELETE FROM OFFER_CHAIN_NOTIFICATION_TYPE WHERE offer_chain_id = 2691330170;
10:26:03  31  	BEGIN
10:26:03  32  	  SELECT 1 INTO TMP_VAR FROM OFFER_OFFER_CHAIN WHERE OFFER_CHAIN_ID = 2691330170 AND INDEX_VALUE = 0 AND ROWNUM <= 1;
10:26:03  33  	EXCEPTION
10:26:03  34  	  WHEN NO_DATA_FOUND THEN
10:26:03  35  	INSERT INTO OFFER (ID, OFFER_STATUS_ID, ENTITLEMENT_DURATION, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.NEXTVAL, 1, 'P0Y0M980DT0H0M', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
10:26:03  36  	BEGIN
10:26:03  37  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  38  	EXCEPTION
10:26:03  39  	  WHEN NO_DATA_FOUND THEN
10:26:03  40  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Web', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:03  41  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  42  	  WHEN OTHERS THEN
10:26:03  43  	    RAISE;
10:26:03  44  	END;
10:26:03  45  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MM')))) AND ROWNUM <= 1;
10:26:03  46  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:03  47  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mm/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:03  48  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:03  49  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MM', 'OFFERMAKER', SYSDATE);
10:26:03  50  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:03  51  	BEGIN
10:26:03  52  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  53  	EXCEPTION
10:26:03  54  	  WHEN NO_DATA_FOUND THEN
10:26:03  55  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Mobile', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:03  56  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  57  	  WHEN OTHERS THEN
10:26:03  58  	    RAISE;
10:26:03  59  	END;
10:26:03  60  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MOW')))) AND ROWNUM <= 1;
10:26:03  61  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:03  62  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mow/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:03  63  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:03  64  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MOW', 'OFFERMAKER', SYSDATE);
10:26:03  65  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:03  66  	BEGIN
10:26:03  67  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  68  	EXCEPTION
10:26:03  69  	  WHEN NO_DATA_FOUND THEN
10:26:03  70  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Archive Article', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:03  71  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  72  	  WHEN OTHERS THEN
10:26:03  73  	    RAISE;
10:26:03  74  	END;
10:26:03  75  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('AAA')))) AND ROWNUM <= 1;
10:26:03  76  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '3500', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:03  77  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/archive/size/3500/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:03  78  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:03  79  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:03  80  	BEGIN
10:26:03  81  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  82  	EXCEPTION
10:26:03  83  	  WHEN NO_DATA_FOUND THEN
10:26:03  84  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesMachine', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:03  85  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  86  	  WHEN OTHERS THEN
10:26:03  87  	    RAISE;
10:26:03  88  	END;
10:26:03  89  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('NONE')))) AND ROWNUM <= 1;
10:26:03  90  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:03  91  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:03  92  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:03  93  	BEGIN
10:26:03  94  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  95  	EXCEPTION
10:26:03  96  	  WHEN NO_DATA_FOUND THEN
10:26:03  97  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Tablet', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:03  98  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03  99  	  WHEN OTHERS THEN
10:26:03 100  	    RAISE;
10:26:03 101  	END;
10:26:03 102  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MTD')))) AND ROWNUM <= 1;
10:26:03 103  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:03 104  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mtd/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:03 105  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:03 106  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MTD', 'OFFERMAKER', SYSDATE);
10:26:03 107  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:03 108  	BEGIN
10:26:03 109  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03 110  	EXCEPTION
10:26:03 111  	  WHEN NO_DATA_FOUND THEN
10:26:03 112  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesReader', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:03 113  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:03 114  	  WHEN OTHERS THEN
10:26:03 115  	    RAISE;
10:26:03 116  	END;
10:26:03 117  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('TNR')))) AND ROWNUM <= 1;
10:26:03 118  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:03 119  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/timesreader/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:03 120  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'TNR', 'OFFERMAKER', SYSDATE);
10:26:03 121  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:03 122  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:03 123  	INSERT INTO OFFER_OFFER_CHAIN (OFFER_ID, OFFER_CHAIN_ID, INDEX_VALUE, NUM_RECURRENCES, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.CURRVAL, 2691330170, '0', '-1', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
10:26:03 124  	END;
10:26:03 125  END;
10:26:03 126  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.39
10:26:04 SQL> 
10:26:04 SQL> DECLARE
10:26:04   2  	TMP_VAR NUMBER;
10:26:04   3  	CUR_PRD_ID NUMBER;
10:26:04   4  	CUR_CAPABILITY_ID NUMBER;
10:26:04   5  BEGIN
10:26:04   6  	BEGIN
10:26:04   7  	  SELECT 1 INTO TMP_VAR FROM OFFER_CHAIN WHERE ID = 2132407180 AND ROWNUM <= 1;
10:26:04   8  	  UPDATE OFFER_CHAIN SET NAME='NYTimes: All Digital Access', DESCRIPTION='Unlimited access to NYTimes.com, and the NYTimes smartphone and tablet apps.*', PRODUCT_URI='', VENDOR_SOURCE_ID='1', BILLING_SOURCE_ID=(SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Amazon'), IS_SEAT_LICENSE=0, GROUP_ACCOUNT_TYPE_ID='FL',IS_ADDRESS_REQUIRED=0, OFFER_CHAIN_STATUS_ID = 1, UPDATE_DATE = SYSDATE, UPDATED_BY = 'OFFERMAKER', IS_GIFT_CERTIFICATE='0', REVOKE_ENTITLEMENTS = '0', ADOPTABILITY_WINDOW_START_DATE = to_date('04-Apr-2013 00:00:00','DD-MON-YY HH24:MI:SS'), ADOPTABILITY_WINDOW_END_DATE = to_date('01-Jan-2100 00:00:00','DD-MON-YY HH24:MI:SS'), AMAZON_APPSTORE_SKU='com.nytimes.kindlefire.bundleD.1.month.optin.7.days.test' WHERE ID = 2132407180;
10:26:04   9  	EXCEPTION
10:26:04  10  	  WHEN NO_DATA_FOUND THEN
10:26:04  11  	    INSERT INTO OFFER_CHAIN (ID, NAME, DESCRIPTION, ADOPTABILITY_WINDOW_START_DATE, ADOPTABILITY_WINDOW_END_DATE, IS_GIFT_CERTIFICATE, PRODUCT_URI, OFFER_CHAIN_STATUS_ID, REVOKE_ENTITLEMENTS, VENDOR_SOURCE_ID, BILLING_SOURCE_ID, IS_SEAT_LICENSE, GROUP_ACCOUNT_TYPE_ID, IS_ADDRESS_REQUIRED, AMAZON_APPSTORE_SKU, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (2132407180, 'NYTimes: All Digital Access', 'Unlimited access to NYTimes.com, and the NYTimes smartphone and tablet apps.*', to_date('04-Apr-2013 00:00:00','DD-MON-YY HH24:MI:SS'), to_date('01-Jan-2100 00:00:00','DD-MON-YY HH24:MI:SS'), '0', NULL, '1', '0', '1', (SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Amazon'), decode('FL','IL',1,0), 'FL', '0', 'com.nytimes.kindlefire.bundleD.1.month.optin.7.days.test', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
10:26:04  12  	END;
10:26:04  13  	DELETE FROM OFFER_CHAIN_ELIGIBILITY WHERE offer_chain_id = 2132407180;
10:26:04  14  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 2132407180, 'IS_COMP', '0', 'OFFERMAKER', SYSDATE);
10:26:04  15  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 2132407180, 'MAX_CONCURRENT_SUBS', 'UNLIMITED', 'OFFERMAKER', SYSDATE);
10:26:04  16  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 2132407180, 'INTERNAL_ONLY', '0', 'OFFERMAKER', SYSDATE);
10:26:04  17  	DELETE FROM OFFER_CHAIN_META_DATA WHERE offer_chain_id = 2132407180;
10:26:04  18  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'BUNDLE_EXPLANATION', 'W+SP+T (for Amazon Kindle Fire)', 'OFFERMAKER', SYSDATE);
10:26:04  19  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'PRICE_DESCRIPTION', '14 days free trial Thereafter $34.99 every 30 days for Bundle D (Billed by Amazon)', 'OFFERMAKER', SYSDATE);
10:26:04  20  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'PRICE_SHORT_DESCRIPTION', 'Amazon Fire Bundle D', 'OFFERMAKER', SYSDATE);
10:26:04  21  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'OFFER_TYPE', 'Full Price', 'OFFERMAKER', SYSDATE);
10:26:04  22  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'PROMO_PRICE_FOOTER_LABEL', 'Billing Cycle', 'OFFERMAKER', SYSDATE);
10:26:04  23  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'BILLING_CYCLE', 'monthly', 'OFFERMAKER', SYSDATE);
10:26:04  24  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'SUBSCRIBER_TYPE', 'Kindle Fire', 'OFFERMAKER', SYSDATE);
10:26:04  25  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'REFUND_POLICY', 'Monthly Billing: No refund.  Users will maintain access for the remainder of the billing period.  Users will not be billed in the next billing cycle.', 'OFFERMAKER', SYSDATE);
10:26:04  26  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'BUNDLE', 'Bundle D (Digital All Access)', 'OFFERMAKER', SYSDATE);
10:26:04  27  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'ADX_BUNDLE', 'MM_FULL', 'OFFERMAKER', SYSDATE);
10:26:04  28  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'SIEBEL_CAMPAIGN_CODE', '3JLKW', 'OFFERMAKER', SYSDATE);
10:26:04  29  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 2132407180, 'UID', '70536f7a790c4ba56a97037747760217e26f48e41644e76154bebb67cb056112', 'OFFERMAKER', SYSDATE);
10:26:04  30  	DELETE FROM OFFER_CHAIN_NOTIFICATION_TYPE WHERE offer_chain_id = 2132407180;
10:26:04  31  	BEGIN
10:26:04  32  	  SELECT 1 INTO TMP_VAR FROM ACTION WHERE NAME = 'FAMILY_PLAN_OWNER_ADD';
10:26:04  33  	EXCEPTION
10:26:04  34  	  WHEN NO_DATA_FOUND THEN
10:26:04  35  	    INSERT INTO ACTION (ID, NAME, CREATE_DATE, CREATED_BY) VALUES (ACTION_ID_SEQ.NEXTVAL, 'FAMILY_PLAN_OWNER_ADD', SYSDATE, 'OFFERMAKER');
10:26:04  36  	END;
10:26:04  37  	BEGIN
10:26:04  38  	  SELECT 1 INTO TMP_VAR FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-welcome';
10:26:04  39  	EXCEPTION
10:26:04  40  	  WHEN NO_DATA_FOUND THEN NULL;
10:26:04  41  	    INSERT INTO CORE_OWNER.NOTIFICATION_TYPE (ID, VALUE, TEMPLATE_URL) VALUES (CORE_OWNER.NOTTID_SEQ.NEXTVAL, 'family-plan-welcome', 'N/A');
10:26:04  42  	END;
10:26:04  43  	BEGIN
10:26:04  44  	  SELECT 1 INTO TMP_VAR FROM ACTION WHERE NAME = 'FAMILY_PLAN_OWNER_EXPIRE';
10:26:04  45  	EXCEPTION
10:26:04  46  	  WHEN NO_DATA_FOUND THEN
10:26:04  47  	    INSERT INTO ACTION (ID, NAME, CREATE_DATE, CREATED_BY) VALUES (ACTION_ID_SEQ.NEXTVAL, 'FAMILY_PLAN_OWNER_EXPIRE', SYSDATE, 'OFFERMAKER');
10:26:04  48  	END;
10:26:04  49  	BEGIN
10:26:04  50  	  SELECT 1 INTO TMP_VAR FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-child-remove';
10:26:04  51  	EXCEPTION
10:26:04  52  	  WHEN NO_DATA_FOUND THEN NULL;
10:26:04  53  	    INSERT INTO CORE_OWNER.NOTIFICATION_TYPE (ID, VALUE, TEMPLATE_URL) VALUES (CORE_OWNER.NOTTID_SEQ.NEXTVAL, 'family-plan-child-remove', 'N/A');
10:26:04  54  	END;
10:26:04  55  	BEGIN
10:26:04  56  	  SELECT 1 INTO TMP_VAR FROM ACTION WHERE NAME = 'FAMILY_PLAN_OWNER_INVITE';
10:26:04  57  	EXCEPTION
10:26:04  58  	  WHEN NO_DATA_FOUND THEN
10:26:04  59  	    INSERT INTO ACTION (ID, NAME, CREATE_DATE, CREATED_BY) VALUES (ACTION_ID_SEQ.NEXTVAL, 'FAMILY_PLAN_OWNER_INVITE', SYSDATE, 'OFFERMAKER');
10:26:04  60  	END;
10:26:04  61  	BEGIN
10:26:04  62  	  SELECT 1 INTO TMP_VAR FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-child-invite';
10:26:04  63  	EXCEPTION
10:26:04  64  	  WHEN NO_DATA_FOUND THEN NULL;
10:26:04  65  	    INSERT INTO CORE_OWNER.NOTIFICATION_TYPE (ID, VALUE, TEMPLATE_URL) VALUES (CORE_OWNER.NOTTID_SEQ.NEXTVAL, 'family-plan-child-invite', 'N/A');
10:26:04  66  	END;
10:26:04  67  	BEGIN
10:26:04  68  	  SELECT 1 INTO TMP_VAR FROM ACTION WHERE NAME = 'FAMILY_PLAN_BORROWER_EXPIRE';
10:26:04  69  	EXCEPTION
10:26:04  70  	  WHEN NO_DATA_FOUND THEN
10:26:04  71  	    INSERT INTO ACTION (ID, NAME, CREATE_DATE, CREATED_BY) VALUES (ACTION_ID_SEQ.NEXTVAL, 'FAMILY_PLAN_BORROWER_EXPIRE', SYSDATE, 'OFFERMAKER');
10:26:04  72  	END;
10:26:04  73  	BEGIN
10:26:04  74  	  SELECT 1 INTO TMP_VAR FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-parent-remove';
10:26:04  75  	EXCEPTION
10:26:04  76  	  WHEN NO_DATA_FOUND THEN NULL;
10:26:04  77  	    INSERT INTO CORE_OWNER.NOTIFICATION_TYPE (ID, VALUE, TEMPLATE_URL) VALUES (CORE_OWNER.NOTTID_SEQ.NEXTVAL, 'family-plan-parent-remove', 'N/A');
10:26:04  78  	END;
10:26:04  79  	INSERT INTO OFFER_CHAIN_NOTIFICATION_TYPE (ID, OFFER_CHAIN_ID, NOTIFICATION_TYPE_ID, ACTION_ID, CREATED_BY, CREATE_DATE) VALUES (OCET_ID_SEQ.NEXTVAL, 2132407180, (SELECT ID FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-welcome'), (SELECT ID FROM ACTION WHERE NAME = 'FAMILY_PLAN_OWNER_ADD'), 'OFFERMAKER', SYSDATE);
10:26:04  80  	INSERT INTO OFFER_CHAIN_NOTIFICATION_TYPE (ID, OFFER_CHAIN_ID, NOTIFICATION_TYPE_ID, ACTION_ID, CREATED_BY, CREATE_DATE) VALUES (OCET_ID_SEQ.NEXTVAL, 2132407180, (SELECT ID FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-child-remove'), (SELECT ID FROM ACTION WHERE NAME = 'FAMILY_PLAN_OWNER_EXPIRE'), 'OFFERMAKER', SYSDATE);
10:26:04  81  	INSERT INTO OFFER_CHAIN_NOTIFICATION_TYPE (ID, OFFER_CHAIN_ID, NOTIFICATION_TYPE_ID, ACTION_ID, CREATED_BY, CREATE_DATE) VALUES (OCET_ID_SEQ.NEXTVAL, 2132407180, (SELECT ID FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-child-invite'), (SELECT ID FROM ACTION WHERE NAME = 'FAMILY_PLAN_OWNER_INVITE'), 'OFFERMAKER', SYSDATE);
10:26:04  82  	INSERT INTO OFFER_CHAIN_NOTIFICATION_TYPE (ID, OFFER_CHAIN_ID, NOTIFICATION_TYPE_ID, ACTION_ID, CREATED_BY, CREATE_DATE) VALUES (OCET_ID_SEQ.NEXTVAL, 2132407180, (SELECT ID FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'family-plan-parent-remove'), (SELECT ID FROM ACTION WHERE NAME = 'FAMILY_PLAN_BORROWER_EXPIRE'), 'OFFERMAKER', SYSDATE);
10:26:04  83  	BEGIN
10:26:04  84  	  SELECT 1 INTO TMP_VAR FROM OFFER_OFFER_CHAIN WHERE OFFER_CHAIN_ID = 2132407180 AND INDEX_VALUE = 0 AND ROWNUM <= 1;
10:26:04  85  	EXCEPTION
10:26:04  86  	  WHEN NO_DATA_FOUND THEN
10:26:04  87  	INSERT INTO OFFER (ID, OFFER_STATUS_ID, ENTITLEMENT_DURATION, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.NEXTVAL, 1, 'P0Y0M980DT0H0M', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
10:26:04  88  	BEGIN
10:26:04  89  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04  90  	EXCEPTION
10:26:04  91  	  WHEN NO_DATA_FOUND THEN
10:26:04  92  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Web', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04  93  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04  94  	  WHEN OTHERS THEN
10:26:04  95  	    RAISE;
10:26:04  96  	END;
10:26:04  97  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MM')))) AND ROWNUM <= 1;
10:26:04  98  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04  99  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mm/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:04 100  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 101  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MM', 'OFFERMAKER', SYSDATE);
10:26:04 102  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 103  	BEGIN
10:26:04 104  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 105  	EXCEPTION
10:26:04 106  	  WHEN NO_DATA_FOUND THEN
10:26:04 107  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Mobile', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04 108  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 109  	  WHEN OTHERS THEN
10:26:04 110  	    RAISE;
10:26:04 111  	END;
10:26:04 112  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MOW')))) AND ROWNUM <= 1;
10:26:04 113  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04 114  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mow/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:04 115  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 116  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MOW', 'OFFERMAKER', SYSDATE);
10:26:04 117  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 118  	BEGIN
10:26:04 119  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 120  	EXCEPTION
10:26:04 121  	  WHEN NO_DATA_FOUND THEN
10:26:04 122  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Archive Article', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04 123  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 124  	  WHEN OTHERS THEN
10:26:04 125  	    RAISE;
10:26:04 126  	END;
10:26:04 127  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('AAA')))) AND ROWNUM <= 1;
10:26:04 128  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '3500', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04 129  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/archive/size/3500/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:04 130  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 131  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 132  	BEGIN
10:26:04 133  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 134  	EXCEPTION
10:26:04 135  	  WHEN NO_DATA_FOUND THEN
10:26:04 136  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesMachine', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04 137  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 138  	  WHEN OTHERS THEN
10:26:04 139  	    RAISE;
10:26:04 140  	END;
10:26:04 141  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('NONE')))) AND ROWNUM <= 1;
10:26:04 142  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04 143  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 144  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 145  	BEGIN
10:26:04 146  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Smartphone' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 147  	EXCEPTION
10:26:04 148  	  WHEN NO_DATA_FOUND THEN
10:26:04 149  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Smartphone', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04 150  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Smartphone' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 151  	  WHEN OTHERS THEN
10:26:04 152  	    RAISE;
10:26:04 153  	END;
10:26:04 154  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MSD')))) AND ROWNUM <= 1;
10:26:04 155  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04 156  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/msd/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:04 157  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 158  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MSD', 'OFFERMAKER', SYSDATE);
10:26:04 159  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 160  	BEGIN
10:26:04 161  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 162  	EXCEPTION
10:26:04 163  	  WHEN NO_DATA_FOUND THEN
10:26:04 164  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Tablet', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04 165  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 166  	  WHEN OTHERS THEN
10:26:04 167  	    RAISE;
10:26:04 168  	END;
10:26:04 169  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MTD')))) AND ROWNUM <= 1;
10:26:04 170  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04 171  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mtd/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:04 172  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 173  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MTD', 'OFFERMAKER', SYSDATE);
10:26:04 174  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 175  	BEGIN
10:26:04 176  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 177  	EXCEPTION
10:26:04 178  	  WHEN NO_DATA_FOUND THEN
10:26:04 179  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesReader', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
10:26:04 180  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
10:26:04 181  	  WHEN OTHERS THEN
10:26:04 182  	    RAISE;
10:26:04 183  	END;
10:26:04 184  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('TNR')))) AND ROWNUM <= 1;
10:26:04 185  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '980', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
10:26:04 186  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/timesreader/:id:.json', 'OFFERMAKER', SYSDATE);
10:26:04 187  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'TNR', 'OFFERMAKER', SYSDATE);
10:26:04 188  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": }', 'OFFERMAKER', SYSDATE);
10:26:04 189  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
10:26:04 190  	INSERT INTO OFFER_OFFER_CHAIN (OFFER_ID, OFFER_CHAIN_ID, INDEX_VALUE, NUM_RECURRENCES, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.CURRVAL, 2132407180, '0', '-1', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
10:26:04 191  	END;
10:26:04 192  END;
10:26:04 193  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.16
10:26:04 SQL> 
10:26:04 SQL> COMMIT;

Commit complete.

Elapsed: 00:00:00.00
10:26:04 SQL> 
10:26:04 SQL> commit;

Commit complete.

Elapsed: 00:00:00.00
10:26:04 SQL> spool off;


Subject: Nomad upgrade completed successfully: ECST@rac01.stg.ewr1.nytimes.com
From: Nomad for Oracle <nytd_oracledba@nytimes.com>
To: nytd_ecommerce@nytimes.com
Cc: nytd_oracledba@nytimes.com

Nomad upgrade operation completed successfully without errors. 
        
        Details
        -------
        DB Hostname: rac01.stg.ewr1.nytimes.com
        DB Role: PRIMARY
        SID: ECST
        Schema: core_owner
        Migration: 61-deploy-kindle-fire-ic
        SVN Revision: 13022
        Duration: 1 sec.
        DBA: sbao
        Service Request: https://jira.em.nytimes.com/browse/ORA-920