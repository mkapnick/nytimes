13:47:10 SQL> @/dbbackups/ECPR/migrations/core_owner/69-Hulu-Gift-Code-Offer-Chain/upgrade.sql
13:47:10 SQL> WHENEVER SQLERROR EXIT SQL.SQLCODE ROLLBACK
13:47:10 SQL> SET SCAN OFF
13:47:10 SQL> SET DEFINE OFF
13:47:10 SQL> 
13:47:10 SQL> 
13:47:10 SQL> DECLARE
13:47:10   2  	TMP_VAR NUMBER;
13:47:10   3  	CUR_PRD_ID NUMBER;
13:47:10   4  	CUR_CAPABILITY_ID NUMBER;
13:47:10   5  	HULU_BILLING_SOURCE_ID NUMBER;
13:47:10   6  BEGIN
13:47:10   7  
13:47:10   8  	BEGIN
13:47:10   9  
13:47:10  10  	  SELECT ID INTO HULU_BILLING_SOURCE_ID FROM BILLING_SOURCE WHERE Name = 'Hulu';
13:47:10  11  
13:47:10  12  	  EXCEPTION
13:47:10  13  	  WHEN NO_DATA_FOUND THEN
13:47:10  14  	  INSERT INTO BILLING_SOURCE VALUES( (SELECT MAX(ID) FROM BILLING_SOURCE) + 1, 'Hulu');
13:47:10  15  
13:47:10  16  	END;
13:47:10  17  
13:47:10  18  	BEGIN
13:47:10  19  	  SELECT 1 INTO TMP_VAR FROM OFFER_CHAIN WHERE ID = 60015001 AND ROWNUM <= 1;
13:47:10  20  	  UPDATE OFFER_CHAIN SET NAME='NYTimes: Web + Tablet App', DESCRIPTION='Unlimited access to NYTimes.com and the NYTimes tablet app.*', PRODUCT_URI='', VENDOR_SOURCE_ID='1', BILLING_SOURCE_ID=(SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Hulu'), IS_SEAT_LICENSE=0, GROUP_ACCOUNT_TYPE_ID='NO',IS_ADDRESS_REQUIRED=0, OFFER_CHAIN_STATUS_ID = 1, UPDATE_DATE = SYSDATE, UPDATED_BY = 'OFFERMAKER', IS_GIFT_CERTIFICATE='1', REVOKE_ENTITLEMENTS = '0', ADOPTABILITY_WINDOW_START_DATE = to_date('25-Jun-2013 00:00:00','DD-MON-YY HH24:MI:SS'), ADOPTABILITY_WINDOW_END_DATE = to_date('02-Oct-2013 00:00:00','DD-MON-YY HH24:MI:SS'), AMAZON_APPSTORE_SKU=NULL WHERE ID = 60015001;
13:47:10  21  	EXCEPTION
13:47:10  22  	  WHEN NO_DATA_FOUND THEN
13:47:10  23  	    INSERT INTO OFFER_CHAIN (ID, NAME, DESCRIPTION, ADOPTABILITY_WINDOW_START_DATE, ADOPTABILITY_WINDOW_END_DATE, IS_GIFT_CERTIFICATE, PRODUCT_URI, OFFER_CHAIN_STATUS_ID, REVOKE_ENTITLEMENTS, VENDOR_SOURCE_ID, BILLING_SOURCE_ID, IS_SEAT_LICENSE, GROUP_ACCOUNT_TYPE_ID, IS_ADDRESS_REQUIRED, AMAZON_APPSTORE_SKU, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (60015001, 'NYTimes: Web + Tablet App', 'Unlimited access to NYTimes.com and the NYTimes tablet app.*', to_date('25-Jun-2013 00:00:00','DD-MON-YY HH24:MI:SS'), to_date('02-Oct-2013 00:00:00','DD-MON-YY HH24:MI:SS'), '1', NULL, '1', '0', '1', (SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Hulu'), decode('NO','IL',1,0), 'NO', '0', '', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
13:47:10  24  	END;
13:47:10  25  	DELETE FROM OFFER_CHAIN_ELIGIBILITY WHERE offer_chain_id = 60015001;
13:47:10  26  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 60015001, 'IS_COMP', '1', 'OFFERMAKER', SYSDATE);
13:47:10  27  	DELETE FROM OFFER_CHAIN_META_DATA WHERE offer_chain_id = 60015001;
13:47:10  28  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'BUNDLE_EXPLANATION', 'Bundle B - 4 Week Gift Sub - Purchase OC', 'OFFERMAKER', SYSDATE);
13:47:10  29  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'PRICE_DESCRIPTION', '4 Week Gift Subscription - $0 for 4 weeks - purchase', 'OFFERMAKER', SYSDATE);
13:47:10  30  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'PRICE_SHORT_DESCRIPTION', 'BNDL B / $0 4 wks GC purch', 'OFFERMAKER', SYSDATE);
13:47:10  31  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'OFFER_TYPE', 'Complimentary', 'OFFERMAKER', SYSDATE);
13:47:10  32  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'OFFER_PRICE_DESCRIPTOR', '4 Weeks Gift Certificate', 'OFFERMAKER', SYSDATE);
13:47:10  33  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'OFFER_PRICE', '$0 for 4 weeks', 'OFFERMAKER', SYSDATE);
13:47:10  34  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'PROMO_PRICE_FOOTER_LABEL', '4 Weeks', 'OFFERMAKER', SYSDATE);
13:47:10  35  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'BILLING_CYCLE', '4 week gift subscription', 'OFFERMAKER', SYSDATE);
13:47:10  36  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'SUBSCRIBER_TYPE', 'DAC - Third Party Complimentary', 'OFFERMAKER', SYSDATE);
13:47:10  37  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'ABOUT_ORDER', 'The full purchase price for gift subscriptions will be charged at the time of purchase and is non-refundable.  Redemption codes are not replaceable. Prices are in U.S. dollars and are subject to change. Other restrictions may apply.  Gift subscription period begins the day of redemption.  Redemption code expires five years after date of purchase.', 'OFFERMAKER', SYSDATE);
13:47:10  38  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'redemption offer chain id', '60015002, 60015003', 'OFFERMAKER', SYSDATE);
13:47:10  39  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'BUNDLE', 'Bundle B (Web+Tab)', 'OFFERMAKER', SYSDATE);
13:47:10  40  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'ADX_BUNDLE', 'MM_PROMO', 'OFFERMAKER', SYSDATE);
13:47:10  41  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'SIEBEL_CAMPAIGN_CODE', '3K939', 'OFFERMAKER', SYSDATE);
13:47:10  42  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'IS_COMP', '1', 'OFFERMAKER', SYSDATE);
13:47:10  43  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'SOCIAL_DISPLAY', 'nyt-bundle', 'OFFERMAKER', SYSDATE);
13:47:10  44  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'ANNUAL_PRICE', '260.00', 'OFFERMAKER', SYSDATE);
13:47:10  45  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015001, 'UID', 'c5126208f82c6bdd8b754c53ee9c13cba89671eb5cf2226a1bd9cc496cc91cca', 'OFFERMAKER', SYSDATE);
13:47:10  46  	DELETE FROM OFFER_CHAIN_NOTIFICATION_TYPE WHERE offer_chain_id = 60015001;
13:47:10  47  	BEGIN
13:47:10  48  	  SELECT 1 INTO TMP_VAR FROM OFFER_OFFER_CHAIN WHERE OFFER_CHAIN_ID = 60015001 AND INDEX_VALUE = 0 AND ROWNUM <= 1;
13:47:10  49  	EXCEPTION
13:47:10  50  	  WHEN NO_DATA_FOUND THEN
13:47:10  51  	INSERT INTO OFFER (ID, OFFER_STATUS_ID, ENTITLEMENT_DURATION, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.NEXTVAL, 1, 'P0Y0M28DT0H0M', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
13:47:10  52  	BEGIN
13:47:10  53  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  54  	EXCEPTION
13:47:10  55  	  WHEN NO_DATA_FOUND THEN
13:47:10  56  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Web', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:10  57  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  58  	  WHEN OTHERS THEN
13:47:10  59  	    RAISE;
13:47:10  60  	END;
13:47:10  61  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MM')))) AND ROWNUM <= 1;
13:47:10  62  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:10  63  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mm/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:10  64  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:10  65  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MM', 'OFFERMAKER', SYSDATE);
13:47:10  66  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:10  67  	BEGIN
13:47:10  68  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  69  	EXCEPTION
13:47:10  70  	  WHEN NO_DATA_FOUND THEN
13:47:10  71  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Mobile', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:10  72  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  73  	  WHEN OTHERS THEN
13:47:10  74  	    RAISE;
13:47:10  75  	END;
13:47:10  76  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MOW')))) AND ROWNUM <= 1;
13:47:10  77  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:10  78  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mow/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:10  79  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:10  80  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MOW', 'OFFERMAKER', SYSDATE);
13:47:10  81  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:10  82  	BEGIN
13:47:10  83  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  84  	EXCEPTION
13:47:10  85  	  WHEN NO_DATA_FOUND THEN
13:47:10  86  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Archive Article', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:10  87  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  88  	  WHEN OTHERS THEN
13:47:10  89  	    RAISE;
13:47:10  90  	END;
13:47:10  91  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('AAA')))) AND ROWNUM <= 1;
13:47:10  92  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '100', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:10  93  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/archive/size/100/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:10  94  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:10  95  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:10  96  	BEGIN
13:47:10  97  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10  98  	EXCEPTION
13:47:10  99  	  WHEN NO_DATA_FOUND THEN
13:47:10 100  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesMachine', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:10 101  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10 102  	  WHEN OTHERS THEN
13:47:10 103  	    RAISE;
13:47:10 104  	END;
13:47:10 105  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('NONE')))) AND ROWNUM <= 1;
13:47:10 106  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:10 107  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:10 108  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:10 109  	BEGIN
13:47:10 110  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10 111  	EXCEPTION
13:47:10 112  	  WHEN NO_DATA_FOUND THEN
13:47:10 113  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Tablet', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:10 114  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10 115  	  WHEN OTHERS THEN
13:47:10 116  	    RAISE;
13:47:10 117  	END;
13:47:10 118  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MTD')))) AND ROWNUM <= 1;
13:47:10 119  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:10 120  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mtd/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:10 121  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:10 122  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MTD', 'OFFERMAKER', SYSDATE);
13:47:10 123  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:10 124  	BEGIN
13:47:10 125  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10 126  	EXCEPTION
13:47:10 127  	  WHEN NO_DATA_FOUND THEN
13:47:10 128  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesReader', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:10 129  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:10 130  	  WHEN OTHERS THEN
13:47:10 131  	    RAISE;
13:47:10 132  	END;
13:47:10 133  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('TNR')))) AND ROWNUM <= 1;
13:47:10 134  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:10 135  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/timesreader/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:10 136  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'TNR', 'OFFERMAKER', SYSDATE);
13:47:10 137  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:10 138  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:10 139  	INSERT INTO OFFER_OFFER_CHAIN (OFFER_ID, OFFER_CHAIN_ID, INDEX_VALUE, NUM_RECURRENCES, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.CURRVAL, 60015001, '0', '1', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
13:47:10 140  	END;
13:47:10 141  END;
13:47:10 142  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:01.00
13:47:11 SQL> 
13:47:11 SQL> DECLARE
13:47:11   2  	TMP_VAR NUMBER;
13:47:11   3  	CUR_PRD_ID NUMBER;
13:47:11   4  	CUR_CAPABILITY_ID NUMBER;
13:47:11   5  BEGIN
13:47:11   6  	BEGIN
13:47:11   7  	  SELECT 1 INTO TMP_VAR FROM OFFER_CHAIN WHERE ID = 60015002 AND ROWNUM <= 1;
13:47:11   8  	  UPDATE OFFER_CHAIN SET NAME='NYTimes: Web + Tablet App', DESCRIPTION='Unlimited access to NYTimes.com and the NYTimes tablet app.*', PRODUCT_URI='', VENDOR_SOURCE_ID='1', BILLING_SOURCE_ID=(SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Hulu'), IS_SEAT_LICENSE=0, GROUP_ACCOUNT_TYPE_ID='NO',IS_ADDRESS_REQUIRED=0, OFFER_CHAIN_STATUS_ID = 1, UPDATE_DATE = SYSDATE, UPDATED_BY = 'OFFERMAKER', IS_GIFT_CERTIFICATE='0', REVOKE_ENTITLEMENTS = '0', ADOPTABILITY_WINDOW_START_DATE = to_date('25-Jun-2013 00:00:00','DD-MON-YY HH24:MI:SS'), ADOPTABILITY_WINDOW_END_DATE = to_date('02-Oct-2013 00:00:00','DD-MON-YY HH24:MI:SS'), AMAZON_APPSTORE_SKU=NULL WHERE ID = 60015002;
13:47:11   9  	EXCEPTION
13:47:11  10  	  WHEN NO_DATA_FOUND THEN
13:47:11  11  	    INSERT INTO OFFER_CHAIN (ID, NAME, DESCRIPTION, ADOPTABILITY_WINDOW_START_DATE, ADOPTABILITY_WINDOW_END_DATE, IS_GIFT_CERTIFICATE, PRODUCT_URI, OFFER_CHAIN_STATUS_ID, REVOKE_ENTITLEMENTS, VENDOR_SOURCE_ID, BILLING_SOURCE_ID, IS_SEAT_LICENSE, GROUP_ACCOUNT_TYPE_ID, IS_ADDRESS_REQUIRED, AMAZON_APPSTORE_SKU, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (60015002, 'NYTimes: Web + Tablet App', 'Unlimited access to NYTimes.com and the NYTimes tablet app.*', to_date('25-Jun-2013 00:00:00','DD-MON-YY HH24:MI:SS'), to_date('02-Oct-2013 00:00:00','DD-MON-YY HH24:MI:SS'), '0', NULL, '1', '0', '1', (SELECT ID FROM BILLING_SOURCE BS WHERE BS.NAME='Hulu'), decode('NO','IL',1,0), 'NO', '0', '', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
13:47:11  12  	END;
13:47:11  13  	DELETE FROM OFFER_CHAIN_ELIGIBILITY WHERE offer_chain_id = 60015002;
13:47:11  14  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 60015002, 'GIFT CERTIFICATE REQUIRED', '1', 'OFFERMAKER', SYSDATE);
13:47:11  15  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 60015002, 'IS_COMP', '1', 'OFFERMAKER', SYSDATE);
13:47:11  16  	INSERT INTO OFFER_CHAIN_ELIGIBILITY (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (ELG_ID_SEQ.NEXTVAL, 60015002, 'MAX_CONCURRENT_SUBS', '1', 'OFFERMAKER', SYSDATE);
13:47:11  17  	DELETE FROM OFFER_CHAIN_META_DATA WHERE offer_chain_id = 60015002;
13:47:11  18  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'BUNDLE_EXPLANATION', 'Bundle B - 4 Week Gift Sub - Redeem OC', 'OFFERMAKER', SYSDATE);
13:47:11  19  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'PRICE_DESCRIPTION', '4 Week Gift Subscription - $0 for 4 weeks - redeem', 'OFFERMAKER', SYSDATE);
13:47:11  20  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'PRICE_SHORT_DESCRIPTION', 'BNDL B / $0 4 wks GC redemp', 'OFFERMAKER', SYSDATE);
13:47:11  21  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'OFFER_TYPE', 'Complimentary', 'OFFERMAKER', SYSDATE);
13:47:11  22  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'PROMO_PRICE_FOOTER_LABEL', '4 Weeks', 'OFFERMAKER', SYSDATE);
13:47:11  23  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'BILLING_CYCLE', '4 week gift subscription', 'OFFERMAKER', SYSDATE);
13:47:11  24  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'SUBSCRIBER_TYPE', 'DAC - Third Party Complimentary', 'OFFERMAKER', SYSDATE);
13:47:11  25  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'BUNDLE', 'Bundle B (Web+Tab)', 'OFFERMAKER', SYSDATE);
13:47:11  26  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'ADX_BUNDLE', 'MM_PROMO', 'OFFERMAKER', SYSDATE);
13:47:11  27  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'SIEBEL_CAMPAIGN_CODE', '3K939', 'OFFERMAKER', SYSDATE);
13:47:11  28  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'IS_COMP', '1', 'OFFERMAKER', SYSDATE);
13:47:11  29  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'ANNUAL_PRICE', '260.00', 'OFFERMAKER', SYSDATE);
13:47:11  30  	INSERT INTO OFFER_CHAIN_META_DATA (ID, OFFER_CHAIN_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (OCMD_ID_SEQ.NEXTVAL, 60015002, 'UID', 'feb47e2aa9ae97e875ea78cc0ba06840273869a2dff56f05d275df992f971554', 'OFFERMAKER', SYSDATE);
13:47:11  31  	DELETE FROM OFFER_CHAIN_NOTIFICATION_TYPE WHERE offer_chain_id = 60015002;
13:47:11  32  	BEGIN
13:47:11  33  	  SELECT 1 INTO TMP_VAR FROM ACTION WHERE NAME = 'GC_REDEEMER_ON_REDEEM';
13:47:11  34  	EXCEPTION
13:47:11  35  	  WHEN NO_DATA_FOUND THEN
13:47:11  36  	    INSERT INTO ACTION (ID, NAME, CREATE_DATE, CREATED_BY) VALUES (ACTION_ID_SEQ.NEXTVAL, 'GC_REDEEMER_ON_REDEEM', SYSDATE, 'OFFERMAKER');
13:47:11  37  	END;
13:47:11  38  	BEGIN
13:47:11  39  	  SELECT 1 INTO TMP_VAR FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'sartre-redeemer-access-digital-access-code';
13:47:11  40  	EXCEPTION
13:47:11  41  	  WHEN NO_DATA_FOUND THEN NULL;
13:47:11  42  	    INSERT INTO CORE_OWNER.NOTIFICATION_TYPE (ID, VALUE, TEMPLATE_URL) VALUES (CORE_OWNER.NOTTID_SEQ.NEXTVAL, 'sartre-redeemer-access-digital-access-code', 'N/A');
13:47:11  43  	END;
13:47:11  44  	BEGIN
13:47:11  45  	  SELECT 1 INTO TMP_VAR FROM ACTION WHERE NAME = 'CLOSE_SUBSCRIPTION';
13:47:11  46  	EXCEPTION
13:47:11  47  	  WHEN NO_DATA_FOUND THEN
13:47:11  48  	    INSERT INTO ACTION (ID, NAME, CREATE_DATE, CREATED_BY) VALUES (ACTION_ID_SEQ.NEXTVAL, 'CLOSE_SUBSCRIPTION', SYSDATE, 'OFFERMAKER');
13:47:11  49  	END;
13:47:11  50  	BEGIN
13:47:11  51  	  SELECT 1 INTO TMP_VAR FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'sartre-sub-expired-gift-hulu';
13:47:11  52  	EXCEPTION
13:47:11  53  	  WHEN NO_DATA_FOUND THEN NULL;
13:47:11  54  	    INSERT INTO CORE_OWNER.NOTIFICATION_TYPE (ID, VALUE, TEMPLATE_URL) VALUES (CORE_OWNER.NOTTID_SEQ.NEXTVAL, 'sartre-sub-expired-gift-hulu', 'N/A');
13:47:11  55  	END;
13:47:11  56  	INSERT INTO OFFER_CHAIN_NOTIFICATION_TYPE (ID, OFFER_CHAIN_ID, NOTIFICATION_TYPE_ID, ACTION_ID, CREATED_BY, CREATE_DATE) VALUES (OCET_ID_SEQ.NEXTVAL, 60015002, (SELECT ID FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'sartre-redeemer-access-digital-access-code'), (SELECT ID FROM ACTION WHERE NAME = 'GC_REDEEMER_ON_REDEEM'), 'OFFERMAKER', SYSDATE);
13:47:11  57  	INSERT INTO OFFER_CHAIN_NOTIFICATION_TYPE (ID, OFFER_CHAIN_ID, NOTIFICATION_TYPE_ID, ACTION_ID, CREATED_BY, CREATE_DATE) VALUES (OCET_ID_SEQ.NEXTVAL, 60015002, (SELECT ID FROM CORE_OWNER.NOTIFICATION_TYPE WHERE VALUE = 'sartre-sub-expired-gift-hulu'), (SELECT ID FROM ACTION WHERE NAME = 'CLOSE_SUBSCRIPTION'), 'OFFERMAKER', SYSDATE);
13:47:11  58  	BEGIN
13:47:11  59  	  SELECT 1 INTO TMP_VAR FROM OFFER_OFFER_CHAIN WHERE OFFER_CHAIN_ID = 60015002 AND INDEX_VALUE = 0 AND ROWNUM <= 1;
13:47:11  60  	EXCEPTION
13:47:11  61  	  WHEN NO_DATA_FOUND THEN
13:47:11  62  	INSERT INTO OFFER (ID, OFFER_STATUS_ID, ENTITLEMENT_DURATION, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.NEXTVAL, 1, 'P0Y0M28DT0H0M', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
13:47:11  63  	BEGIN
13:47:11  64  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11  65  	EXCEPTION
13:47:11  66  	  WHEN NO_DATA_FOUND THEN
13:47:11  67  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Web', '0', 1, NULL, '0.357143', 'OFFERMAKER', SYSDATE);
13:47:11  68  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Web' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11  69  	  WHEN OTHERS THEN
13:47:11  70  	    RAISE;
13:47:11  71  	END;
13:47:11  72  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MM')))) AND ROWNUM <= 1;
13:47:11  73  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0.357143', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:11  74  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mm/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:11  75  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:11  76  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MM', 'OFFERMAKER', SYSDATE);
13:47:11  77  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11  78  	INSERT INTO DISCOUNT (ID, NAME, DESCRIPTION, FIXED_AMOUNT, PERCENT_AMOUNT, DISCOUNT_TYPE_ID, CREATED_BY, CREATE_DATE) VALUES (DSC_ID_SEQ.NEXTVAL, 'Discount', 'Target Offer Price: 0.0. Full Offer Price: 20.0000. Discounted Product Price: 0.0000. Full Product Price: 10.0000', '10.00', '0', 1, 'OFFERMAKER', SYSDATE);
13:47:11  79  	INSERT INTO DISCOUNT_PRODUCT_OFFERING (DISCOUNT_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (DSC_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11  80  	BEGIN
13:47:11  81  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11  82  	EXCEPTION
13:47:11  83  	  WHEN NO_DATA_FOUND THEN
13:47:11  84  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Mobile', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:11  85  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Mobile' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11  86  	  WHEN OTHERS THEN
13:47:11  87  	    RAISE;
13:47:11  88  	END;
13:47:11  89  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MOW')))) AND ROWNUM <= 1;
13:47:11  90  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:11  91  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mow/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:11  92  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:11  93  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MOW', 'OFFERMAKER', SYSDATE);
13:47:11  94  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11  95  	BEGIN
13:47:11  96  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11  97  	EXCEPTION
13:47:11  98  	  WHEN NO_DATA_FOUND THEN
13:47:11  99  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Archive Article', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:11 100  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Archive Article' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 101  	  WHEN OTHERS THEN
13:47:11 102  	    RAISE;
13:47:11 103  	END;
13:47:11 104  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('AAA')))) AND ROWNUM <= 1;
13:47:11 105  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '100', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:11 106  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/archive/size/100/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:11 107  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:11 108  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11 109  	BEGIN
13:47:11 110  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 111  	EXCEPTION
13:47:11 112  	  WHEN NO_DATA_FOUND THEN
13:47:11 113  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesMachine', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:11 114  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesMachine' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 115  	  WHEN OTHERS THEN
13:47:11 116  	    RAISE;
13:47:11 117  	END;
13:47:11 118  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('NONE')))) AND ROWNUM <= 1;
13:47:11 119  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:11 120  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:11 121  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11 122  	BEGIN
13:47:11 123  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 124  	EXCEPTION
13:47:11 125  	  WHEN NO_DATA_FOUND THEN
13:47:11 126  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'Tablet', '0', 1, NULL, '0.357143', 'OFFERMAKER', SYSDATE);
13:47:11 127  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'Tablet' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 128  	  WHEN OTHERS THEN
13:47:11 129  	    RAISE;
13:47:11 130  	END;
13:47:11 131  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('MTD')))) AND ROWNUM <= 1;
13:47:11 132  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0.357143', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:11 133  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/mtd/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:11 134  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:11 135  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'MTD', 'OFFERMAKER', SYSDATE);
13:47:11 136  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11 137  	INSERT INTO DISCOUNT (ID, NAME, DESCRIPTION, FIXED_AMOUNT, PERCENT_AMOUNT, DISCOUNT_TYPE_ID, CREATED_BY, CREATE_DATE) VALUES (DSC_ID_SEQ.NEXTVAL, 'Discount', 'Target Offer Price: 0.0. Full Offer Price: 20.0000. Discounted Product Price: 0.0000. Full Product Price: 10.0000', '10.00', '0', 1, 'OFFERMAKER', SYSDATE);
13:47:11 138  	INSERT INTO DISCOUNT_PRODUCT_OFFERING (DISCOUNT_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (DSC_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11 139  	BEGIN
13:47:11 140  	  SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 141  	EXCEPTION
13:47:11 142  	  WHEN NO_DATA_FOUND THEN
13:47:11 143  	    INSERT INTO PRODUCT (ID, NAME, PRODUCTION_COST, PRODUCT_STATUS_ID, PRODUCT_URI, UNIT_PRICE, CREATED_BY, CREATE_DATE) VALUES (PRD_ID_SEQ.NEXTVAL, 'TimesReader', '0', 1, NULL, '0', 'OFFERMAKER', SYSDATE);
13:47:11 144  	    SELECT ID INTO CUR_PRD_ID FROM PRODUCT WHERE NAME = 'TimesReader' AND PRODUCT_STATUS_ID = 1 AND ROWNUM <= 1;
13:47:11 145  	  WHEN OTHERS THEN
13:47:11 146  	    RAISE;
13:47:11 147  	END;
13:47:11 148  	SELECT ID INTO CUR_CAPABILITY_ID FROM CAPABILITY WHERE CODE IN LTRIM(RTRIM((UPPER('TNR')))) AND ROWNUM <= 1;
13:47:11 149  	INSERT INTO PRODUCT_OFFERING (ID, PRODUCT_ID, TAX_POLICY_TYPE_ID, QUANTITY, UNIT_PRICE, TAX_CATEGORY_ID, CAPABILITY_ID, CREATED_BY, CREATE_DATE) VALUES (PO_ID_SEQ.NEXTVAL, CUR_PRD_ID, '1', '28', '0', '2', CUR_CAPABILITY_ID, 'OFFERMAKER', SYSDATE);
13:47:11 150  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'entitlement_uri', 'http://:hostname:/svc/user/entitlements/timesreader/:id:.json', 'OFFERMAKER', SYSDATE);
13:47:11 151  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'capability', 'TNR', 'OFFERMAKER', SYSDATE);
13:47:11 152  	INSERT INTO PRODUCT_OFFERING_META_DATA (ID, PRODUCT_OFFERING_ID, NAME, VALUE, CREATED_BY, CREATE_DATE) VALUES (PROMD_ID_SEQ.NEXTVAL, PO_ID_SEQ.CURRVAL, 'DEFAULT_VAT_RATE', '{"*": 0.0}', 'OFFERMAKER', SYSDATE);
13:47:11 153  	INSERT INTO OFFER_PRODUCT_OFFERING (OFFER_ID, PRODUCT_OFFERING_ID, CREATED_BY, CREATE_DATE) VALUES (OFR_ID_SEQ.CURRVAL, PO_ID_SEQ.CURRVAL, 'OFFERMAKER', SYSDATE);
13:47:11 154  	INSERT INTO OFFER_OFFER_CHAIN (OFFER_ID, OFFER_CHAIN_ID, INDEX_VALUE, NUM_RECURRENCES, CREATED_BY, CREATE_DATE, updated_by, update_date) VALUES (OFR_ID_SEQ.CURRVAL, 60015002, '0', '1', 'OFFERMAKER', SYSDATE, 'OFFERMAKER', SYSDATE);
13:47:11 155  	END;
13:47:11 156  END;
13:47:11 157  /
DECLARE
*
ERROR at line 1:
ORA-12899: value too large for column "CORE_OWNER"."DISCOUNT"."DESCRIPTION" 
(actual: 113, maximum: 100) 
ORA-06512: at line 78 
ORA-01403: no data found 




Subject: Nomad upgrade completed with errors: ECPR@rac01.prd.ewr1.nytimes.com
From: Nomad for Oracle <nytd_oracledba@nytimes.com>
To: nytd_ecommerce@nytimes.com
Cc: nytd_oracledba@nytimes.com

Nomad upgrade operation has errors. 
        
        Details
        -------
        DB Hostname: rac01.prd.ewr1.nytimes.com
        DB Role: PRIMARY
        SID: ECPR
        Schema: core_owner
        Migration: 69-Hulu-Gift-Code-Offer-Chain
        SVN Revision: 13343
        Duration: 1 sec.
        DBA: apathrose
                
        
        Error Detail
        ------------
        
        ERROR at line 1: ORA-12899: value too large for column "CORE_OWNER"."DISCOUNT"."DESCRIPTION" (actual: 113, maximum: 100) ORA-06512: at line 78 ORA-01403: no data found